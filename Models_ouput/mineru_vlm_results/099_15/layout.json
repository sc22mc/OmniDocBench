{
    "pdf_info": [
        {
            "para_blocks": [
                {
                    "type": "table",
                    "bbox": [
                        504,
                        336,
                        2042,
                        1079
                    ],
                    "blocks": [
                        {
                            "bbox": [
                                504,
                                336,
                                2042,
                                1079
                            ],
                            "lines": [
                                {
                                    "bbox": [
                                        504,
                                        336,
                                        2042,
                                        1079
                                    ],
                                    "spans": [
                                        {
                                            "bbox": [
                                                504,
                                                336,
                                                2042,
                                                1079
                                            ],
                                            "type": "table",
                                            "html": "<table><tr><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td></tr><tr><td>others</td><td>317</td><td>79</td><td>writing_cooking_code</td><td>40</td><td>11</td><td>classification_identification</td><td>24</td><td>6</td></tr><tr><td>functional_writing</td><td>128</td><td>32</td><td>explaining_code</td><td>40</td><td>10</td><td>language_polishing</td><td>22</td><td>4</td></tr><tr><td>brainstorming</td><td>90</td><td>24</td><td>writing_legal_document</td><td>40</td><td>10</td><td>chitchat</td><td>22</td><td>7</td></tr><tr><td>seeking_advice</td><td>88</td><td>25</td><td>asking_how_to_question</td><td>40</td><td>10</td><td>writing_product_description</td><td>20</td><td>5</td></tr><tr><td>open_question</td><td>77</td><td>20</td><td>writing_presentation_script</td><td>38</td><td>10</td><td>data_analysis</td><td>18</td><td>5</td></tr><tr><td>explaining_general</td><td>66</td><td>17</td><td>writing_social_media_post</td><td>38</td><td>10</td><td>writing_marketing_materials</td><td>17</td><td>5</td></tr><tr><td>instructional_writing</td><td>58</td><td>15</td><td>question_generation</td><td>38</td><td>10</td><td>note_summarization</td><td>17</td><td>4</td></tr><tr><td>verifying_fact</td><td>49</td><td>13</td><td>planning</td><td>38</td><td>10</td><td>paraphrasing</td><td>17</td><td>5</td></tr><tr><td>analyzing_general</td><td>49</td><td>13</td><td>writing_blog_post</td><td>36</td><td>9</td><td>writing_technical_document</td><td>17</td><td>5</td></tr><tr><td>title_generation</td><td>48</td><td>12</td><td>writing_job_application</td><td>36</td><td>10</td><td>text_simplification</td><td>16</td><td>5</td></tr><tr><td>code_generation</td><td>48</td><td>12</td><td>writingPersonalEssay</td><td>36</td><td>10</td><td>information_extraction</td><td>16</td><td>2</td></tr><tr><td>rejeplay</td><td>47</td><td>12</td><td>value_judgement</td><td>35</td><td>9</td><td>writing_biography</td><td>16</td><td>4</td></tr><tr><td>rejeplay</td><td>45</td><td>12</td><td>code_to_code_translation</td><td>32</td><td>9</td><td>text_concretion</td><td>12</td><td>6</td></tr><tr><td>creative_writing</td><td>45</td><td>12</td><td>writing_advertisement</td><td>31</td><td>8</td><td>reading_comprehension</td><td>12</td><td>3</td></tr><tr><td>exam_question_with_noath</td><td>44</td><td>12</td><td>writing_email</td><td>30</td><td>8</td><td>keywords_extraction</td><td>12</td><td>3</td></tr><tr><td>writing_long_lyrics</td><td>44</td><td>11</td><td>recommendation</td><td>29</td><td>8</td><td>topic modeling</td><td>10</td><td>3</td></tr><tr><td>text_to_text_translation</td><td>43</td><td>11</td><td>ranking</td><td>28</td><td>8</td><td>writing_scientific_paper</td><td>10</td><td>3</td></tr><tr><td>text_summarization</td><td>43</td><td>12</td><td>counterfactual</td><td>26</td><td>7</td><td>peer_review</td><td>7</td><td>2</td></tr><tr><td>code_conrection_rewriting</td><td>43</td><td>11</td><td>exam_question_with_math</td><td>24</td><td>4</td><td>code_simplification</td><td>6</td><td>6</td></tr><tr><td>math_ reasoning</td><td>41</td><td>12</td><td>writing_news_article</td><td>24</td><td>6</td><td>overall</td><td>2383</td><td>623</td></tr></table>",
                                            "image_path": "c69a3f150075ed3edfec5cfd26eb22b2113686eafdd2cd9509fee60d129ef373.jpg"
                                        }
                                    ]
                                }
                            ],
                            "index": 1,
                            "type": "table_body"
                        },
                        {
                            "bbox": [
                                443,
                                1118,
                                2108,
                                1214
                            ],
                            "lines": [
                                {
                                    "bbox": [
                                        443,
                                        1118,
                                        2108,
                                        1214
                                    ],
                                    "spans": [
                                        {
                                            "bbox": [
                                                443,
                                                1118,
                                                2108,
                                                1214
                                            ],
                                            "type": "text",
                                            "content": "Table 7: The scenario distribution in the training and test set for scenario classifier, note that \"rejecting\" and \"peer_review\" are two early-defined scenarios that have been removed by us."
                                        }
                                    ]
                                }
                            ],
                            "index": 0,
                            "type": "table_caption"
                        }
                    ],
                    "index": 1
                },
                {
                    "bbox": [
                        443,
                        1293,
                        1522,
                        1349
                    ],
                    "type": "title",
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1293,
                                1522,
                                1349
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1293,
                                        1522,
                                        1349
                                    ],
                                    "type": "text",
                                    "content": "B TRAINING DETAILS OF SCENARIO CLASSIFIER"
                                }
                            ]
                        }
                    ],
                    "index": 2,
                    "level": 1
                },
                {
                    "bbox": [
                        443,
                        1399,
                        2106,
                        1452
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1399,
                                2106,
                                1452
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1399,
                                        2106,
                                        1452
                                    ],
                                    "type": "text",
                                    "content": "In this section we describe in detail the training process of the scenario classifier mentioned in "
                                },
                                {
                                    "bbox": [
                                        443,
                                        1399,
                                        2106,
                                        1452
                                    ],
                                    "type": "inline_equation",
                                    "content": "\\S 3.2"
                                }
                            ]
                        }
                    ],
                    "index": 3
                },
                {
                    "bbox": [
                        443,
                        1471,
                        2106,
                        1702
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1471,
                                2106,
                                1702
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1471,
                                        2106,
                                        1702
                                    ],
                                    "type": "text",
                                    "content": "We model the scenario classification task as a generation task. The classifier are required to generate only the scenario name when given the query, with the prompt as \"Identify the scenario for the user's query, output 'default' if you are uncertain.\\n\\nQuery:\\n\\ninfo(input)\\n\\nnScenario:\" (the \"default\" scenario in the prompt is the early naming for \"others\" scenario)."
                                }
                            ]
                        }
                    ],
                    "index": 4
                },
                {
                    "bbox": [
                        446,
                        1729,
                        1173,
                        1775
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                446,
                                1729,
                                1173,
                                1775
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        446,
                                        1729,
                                        1173,
                                        1775
                                    ],
                                    "type": "text",
                                    "content": "In general, the training involves three steps:"
                                }
                            ]
                        }
                    ],
                    "index": 5
                },
                {
                    "bbox": [
                        532,
                        1818,
                        2106,
                        2356
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                532,
                                1818,
                                2106,
                                2356
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        532,
                                        1818,
                                        2106,
                                        2356
                                    ],
                                    "type": "text",
                                    "content": "1. We first brainstorm about 10 seed queries for each scenario with the help of ChatGPT, and train a model that can directly output the scenario name when given a query as a conditional generation task on this small synthetic dataset. \n2. Using the trained model, we conducted an initial classification for queries in Chatbot Arena Conversations and ShareGPT as they cover much more scenarios than other datasets. Based on this preliminary classification, we randomly select up to 50 queries from each scenario for a secondary manual validation, involving data cleaning and correcting misclassified labels. \n3. We combine the newly-collected dataset and the small synthetic dataset in step 1, and retrain our final classifier. We divide queries in each scenario in an 8:2 train/test split (Tab. 7). The accuracy and F1 of the final classifier on test set are 72.55 and 74.12, respectively."
                                }
                            ]
                        }
                    ],
                    "index": 6
                },
                {
                    "bbox": [
                        443,
                        2395,
                        2106,
                        2679
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                443,
                                2395,
                                2106,
                                2679
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "text",
                                    "content": "Our scenario classifier is trained from LLaMA- 2:13B (Touvron et al., 2023b), and we set the max sequence length as 2,048, and the max length for query as 2,048- 50- 1,998 both in training and inference. If a query "
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "inline_equation",
                                    "content": "Q"
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "text",
                                    "content": " with length "
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "inline_equation",
                                    "content": "L"
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "text",
                                    "content": " exceeds that limit, we truncate it from the middle and replace the dropped part with a \"... since the front and end of the sequence usually contain more important information for identifying scenario of the (such as the user's instruction): "
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "inline_equation",
                                    "content": "Q_{1:L} \\rightarrow [Q_{1:999}; \\ldots , Q_{L - 1000:L}]"
                                },
                                {
                                    "bbox": [
                                        443,
                                        2395,
                                        2106,
                                        2679
                                    ],
                                    "type": "text",
                                    "content": "."
                                }
                            ]
                        }
                    ],
                    "index": 7
                },
                {
                    "bbox": [
                        443,
                        2699,
                        2106,
                        2927
                    ],
                    "type": "text",
                    "lines": [
                        {
                            "bbox": [
                                443,
                                2699,
                                2106,
                                2927
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2699,
                                        2106,
                                        2927
                                    ],
                                    "type": "text",
                                    "content": "We train the scenario classifier for 3 epochs on the training set, and set the batch size as 64. Without warmup steps, we set the initial learning rate to 1e- 5 and cosine decaying to 0 by the end of training. The optimizer is AdamW with "
                                },
                                {
                                    "bbox": [
                                        443,
                                        2699,
                                        2106,
                                        2927
                                    ],
                                    "type": "inline_equation",
                                    "content": "\\beta_{1} = 0.9"
                                },
                                {
                                    "bbox": [
                                        443,
                                        2699,
                                        2106,
                                        2927
                                    ],
                                    "type": "text",
                                    "content": ", "
                                },
                                {
                                    "bbox": [
                                        443,
                                        2699,
                                        2106,
                                        2927
                                    ],
                                    "type": "inline_equation",
                                    "content": "\\beta_{2} = 0.95"
                                },
                                {
                                    "bbox": [
                                        443,
                                        2699,
                                        2106,
                                        2927
                                    ],
                                    "type": "text",
                                    "content": " as in training AUTO- J, and we also use the speedup and GPU memory saving techniques like DeepSpeed Zero 3, BF16, TF32, and gradient- checkpointing. The loss is only calculated on the output end as well."
                                }
                            ]
                        }
                    ],
                    "index": 8
                }
            ],
            "discarded_blocks": [],
            "page_size": [
                2550,
                3300
            ],
            "page_idx": 0
        }
    ],
    "_backend": "vlm",
    "_version_name": "2.1.9"
}