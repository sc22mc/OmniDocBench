![](images/a9fcfc4d2615dbe0c4ab98145e449cfa213ecc90a039c40a25742309de07f353.jpg)  
Fig. 3. Sensor node block diagram. Passive wakeup is achieved by harvesting from the wakeup signal. First,  $V_{\mathrm{SMP}}$  triggers an OCV measurement (a), then  $V_{\mathrm{WK}}$  powers the IPSP (b), allowing energy to flow into the supercap. This continues until  $V_{\mathrm{CAP}}$  can power the IPSP on its own (that is, above its load-detach voltage of 2 V). Above this threshold, the MCU stays in ultralow power mode and executes EIS (c) and then LoRa transmission (d) when notified that energy is sufficient by the voltage monitors. After the transmission, the nearly empty storage is further depleted to trigger the BQ's internal load-detach mechanism and go back to cell rest.

Section II, rest periods also ensure that a correct steady- state OCV measurement can be executed, allowing us to set a more accurate MPP (see Section IV- B).

To the best of our knowledge, no estimation of the optimal resting period of a PMFC is currently available. For this reason, we do not assume its maximum duration when designing the sensor node architecture. If we rely on sensor node components to generate the wakeup signal, there is an upper limit on rest time. If the PMFC were to require long resting periods, the storage could become fully discharged while powering the components required for wakeup signal generation (e.g., timers, voltage monitors), preventing the node from ever waking up again. Because of this reason, we bring the node out of rest state through an external wakeup signal, which we also harvest in a passive wakeup approach. The energy harvested from this external signal is used to bootstrap the input power and sensing path (IPSPâ€”Section III- C2), which is the section of the sensor node allowing power to flow from the PMFC to the harvesting circuitry [35]. In this way, the sensor node can still successfully wakeup even if its storage becomes fully depleted. This technique ensures no upper bound on rest time, although it requires the external infrastructure to generate the wakeup signal. Depending on the application, we can rely on self- powered IR sensors, PV panels, or passive wakeup radios for passive wakeup [36]. If optimal rest times are short enough and compatible with an onboard wakeup generation, passive wakeup could act as a fail- safe to revive nodes discharged during rest.

# C. Sensor Node Block Diagram and Application Cycle

We designed the proposed sensor node architecture shown in Fig. 3 by choosing cost- effective components needed to execute and transmit PMFC- powered, ultralow power EIS measurements and by building a service circuitry (SC) around them. The

SC adapts the chosen components to the requirements of optimal PMFC use. First, we will discuss our choice of components, then we will analyze the role of the SC in the architecture.

1) Core Components Selection: Due to the low voltage, low power limitations of PMFCs (1), the sensor node requires an energy conversion stage which boosts the PMFC's output voltage and buffers its energy into a supercapacitor for a duty-cycled operation of the sensor node. We selected the BQ25505 IC by Texas Instruments for this purpose. Besides featuring ultralow quiescent current (325 nA) and an efficient ship mode draining only 5 nA, this IC provides a  $V_{\mathrm{BATOK}}$  signal useful to detach loads during cold-start (see Section IV-B).

The sensor node features two key components besides the dc- dc converter: the AFE providing EIS functionality and the radio transceiver needed to transmit measurement results to a base station. We selected the MAX30134 EIS AFE and Semtech's SX1276 LoRa radio for their ultralow power consumption. While the latter is a staple in low- power, long- range communication, the MAX30134 still needs to be tested on PMFCs. The MAX30134 is a four- channel AFE providing biasing and full measurement path, ADC included, to be used on two or three terminal electrochemical sensors. This IC can execute voltage and temperature monitoring, dc measurements, and typical electrochemical measurements such as EIS and cyclic voltammetry. Finally, two factory- trimmed voltage monitors (Analog Devices, ADM8612) provide the signals triggering the measurement and transmission tasks at the appropriate storage voltages (see Section IV- E).

For the first bench demonstrator, we opted for two- terminal EIS measurements, as this work's goal is not to obtain the