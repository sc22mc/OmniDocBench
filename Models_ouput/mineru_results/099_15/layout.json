{
    "pdf_info": [
        {
            "preproc_blocks": [
                {
                    "type": "table",
                    "bbox": [
                        511,
                        339,
                        2041,
                        1084
                    ],
                    "blocks": [
                        {
                            "type": "table_body",
                            "bbox": [
                                511,
                                339,
                                2041,
                                1084
                            ],
                            "group_id": 0,
                            "lines": [
                                {
                                    "bbox": [
                                        511,
                                        339,
                                        2041,
                                        1084
                                    ],
                                    "spans": [
                                        {
                                            "bbox": [
                                                511,
                                                339,
                                                2041,
                                                1084
                                            ],
                                            "score": 0.982,
                                            "html": "<table><tr><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td></tr><tr><td>others</td><td>317</td><td></td><td></td><td>40</td><td>11</td><td>classification_identification</td><td>24</td><td>6</td></tr><tr><td>functional_writing</td><td>128</td><td></td><td>explaining_code</td><td>40</td><td>10</td><td>language_polishing</td><td>2222</td><td>4</td></tr><tr><td>brainstorming</td><td>90</td><td></td><td>writing_legal_document</td><td>40</td><td>10</td><td>chitchat</td><td></td><td>7</td></tr><tr><td>seeking_advice</td><td>88</td><td></td><td>asking_how_to_question</td><td>40</td><td>10</td><td>writing_product_description</td><td>20</td><td>5</td></tr><tr><td>open_question</td><td>77</td><td></td><td>writing_presentation_script</td><td>38</td><td>10</td><td>data_analysis</td><td>18</td><td>5</td></tr><tr><td>explaining_general</td><td>66</td><td>17</td><td>writing_social_media_post</td><td>38</td><td>10</td><td>writing_marketing_materials</td><td>17</td><td>5</td></tr><tr><td>instructional_rewriting</td><td>58</td><td>15</td><td>question_generation</td><td>38</td><td>10</td><td>note_summarization</td><td>17</td><td>4</td></tr><tr><td>verifying_fact</td><td>49</td><td>13</td><td>planning</td><td></td><td>10</td><td>paraphrasing</td><td>17</td><td>5</td></tr><tr><td>analyzing_general</td><td>49</td><td>13</td><td>writing_blog_post</td><td>3830</td><td>9</td><td>writing_technical_document</td><td>17</td><td>5</td></tr><tr><td>title_generation</td><td>48</td><td>12</td><td>writing_job_application</td><td>36</td><td>10</td><td>text_simplification</td><td>16</td><td>5</td></tr><tr><td>code_generation</td><td>48</td><td>12</td><td>writing_personal_essay</td><td>36</td><td>10</td><td>information_extraction</td><td>16</td><td>2</td></tr><tr><td>roleplay</td><td>47</td><td>12</td><td>value_judgement</td><td>35</td><td>9</td><td>writing_biography</td><td>16</td><td>4</td></tr><tr><td>rejecting</td><td>45</td><td>12</td><td>code_to_code_translation</td><td>32</td><td>9</td><td>text_correction</td><td>12</td><td>6</td></tr><tr><td>creative_writing</td><td>45</td><td>12</td><td>writing_advertisement</td><td>31</td><td></td><td>reading_comprehension</td><td>12</td><td>3</td></tr><tr><td>exam_question_without_math</td><td>44</td><td>12</td><td>writing_email</td><td>30</td><td></td><td>keywords_extraction</td><td>12</td><td>3</td></tr><tr><td>writing_song_lyrics</td><td>44</td><td>11</td><td>recommendation</td><td>2928</td><td>888</td><td>topic_modeling</td><td>10</td><td>3</td></tr><tr><td>text_to_text_translation</td><td>43</td><td>11</td><td>ranking</td><td></td><td>8</td><td>writing_scientific_paper</td><td>10</td><td>3</td></tr><tr><td>text_summarization</td><td>43</td><td>12</td><td>counterfactual</td><td>26</td><td>7</td><td>peer_review</td><td>7</td><td>2</td></tr><tr><td>code_correction_rewriting</td><td>43</td><td>11</td><td>exam_question_with_math</td><td>24</td><td>4</td><td>code_simplification</td><td>6</td><td>2</td></tr><tr><td>math_reasoning</td><td>41</td><td>12</td><td>writing_news_article</td><td>24</td><td>6</td><td>overll</td><td>2383623</td><td></td></tr></table>",
                                            "type": "table",
                                            "image_path": "9b49904b7632dd696018ae665146de7b97c693e7ae4ecdfc8a73550ff436de4a.jpg"
                                        }
                                    ]
                                }
                            ],
                            "index": 1,
                            "virtual_lines": [
                                {
                                    "bbox": [
                                        511,
                                        339,
                                        2041,
                                        587.3333333333334
                                    ],
                                    "spans": [],
                                    "index": 0
                                },
                                {
                                    "bbox": [
                                        511,
                                        587.3333333333334,
                                        2041,
                                        835.6666666666667
                                    ],
                                    "spans": [],
                                    "index": 1
                                },
                                {
                                    "bbox": [
                                        511,
                                        835.6666666666667,
                                        2041,
                                        1084.0
                                    ],
                                    "spans": [],
                                    "index": 2
                                }
                            ]
                        }
                    ],
                    "index": 1
                },
                {
                    "type": "text",
                    "bbox": [
                        452,
                        1121,
                        2110,
                        1214
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1116,
                                2114,
                                1176
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1116,
                                        2114,
                                        1176
                                    ],
                                    "score": 0.967,
                                    "content": "Table 7: The scenario distribution in the training and test set for scenario classifier, note that “rejecting”",
                                    "type": "text"
                                }
                            ],
                            "index": 3
                        },
                        {
                            "bbox": [
                                444,
                                1165,
                                1807,
                                1219
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        444,
                                        1165,
                                        1807,
                                        1219
                                    ],
                                    "score": 0.971,
                                    "content": "and \"peer_review”are two early-defined scenarios that have been removed by us.",
                                    "type": "text"
                                }
                            ],
                            "index": 4
                        }
                    ],
                    "index": 3.5
                },
                {
                    "type": "title",
                    "bbox": [
                        447,
                        1298,
                        1523,
                        1352
                    ],
                    "lines": [
                        {
                            "bbox": [
                                434,
                                1290,
                                1531,
                                1363
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        434,
                                        1290,
                                        1531,
                                        1363
                                    ],
                                    "score": 0.973,
                                    "content": "BTRAINING DETAILS OF SCENARIO CLASSIFIER",
                                    "type": "text"
                                }
                            ],
                            "index": 5
                        }
                    ],
                    "index": 5
                },
                {
                    "type": "text",
                    "bbox": [
                        430,
                        1398,
                        2111,
                        1704
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1401,
                                2018,
                                1457
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1401,
                                        2018,
                                        1457
                                    ],
                                    "score": 0.985,
                                    "content": "In this section we describe in detail the training process of the scenario classifier mentioned in",
                                    "type": "text"
                                }
                            ],
                            "index": 6
                        },
                        {
                            "bbox": [
                                442,
                                1469,
                                2115,
                                1526
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        1469,
                                        2115,
                                        1526
                                    ],
                                    "score": 0.987,
                                    "content": "We model the scenario classification task as a generation task.The classifier are re-",
                                    "type": "text"
                                }
                            ],
                            "index": 7
                        },
                        {
                            "bbox": [
                                439,
                                1518,
                                2111,
                                1572
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        439,
                                        1518,
                                        2111,
                                        1572
                                    ],
                                    "score": 0.983,
                                    "content": "quired to generate only the scenario name when given the query，with the prompt as",
                                    "type": "text"
                                }
                            ],
                            "index": 8
                        },
                        {
                            "bbox": [
                                443,
                                1563,
                                2111,
                                1620
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1563,
                                        2111,
                                        1620
                                    ],
                                    "score": 0.964,
                                    "content": "\"Identifythe scenario forthe user'squery，output'default’ifyou are",
                                    "type": "text"
                                }
                            ],
                            "index": 9
                        },
                        {
                            "bbox": [
                                442,
                                1607,
                                2108,
                                1664
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        1607,
                                        2108,
                                        1664
                                    ],
                                    "score": 0.98,
                                    "content": "uncertain.\\n\\nQuery:\\n\\n{input}\\n\\nScenario:\"(the \"default\" scenario in the prompt is the",
                                    "type": "text"
                                }
                            ],
                            "index": 10
                        },
                        {
                            "bbox": [
                                446,
                                1657,
                                1050,
                                1709
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        446,
                                        1657,
                                        1050,
                                        1709
                                    ],
                                    "score": 0.972,
                                    "content": "early naming for \"others\" scenario).",
                                    "type": "text"
                                }
                            ],
                            "index": 11
                        }
                    ],
                    "index": 8.5
                },
                {
                    "type": "text",
                    "bbox": [
                        447,
                        1727,
                        1178,
                        1773
                    ],
                    "lines": [
                        {
                            "bbox": [
                                440,
                                1722,
                                1180,
                                1782
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        1722,
                                        1180,
                                        1782
                                    ],
                                    "score": 0.979,
                                    "content": "In general, the training involves three steps:",
                                    "type": "text"
                                }
                            ],
                            "index": 12
                        }
                    ],
                    "index": 12
                },
                {
                    "type": "text",
                    "bbox": [
                        541,
                        1817,
                        2106,
                        2355
                    ],
                    "lines": [
                        {
                            "bbox": [
                                541,
                                1818,
                                2106,
                                1870
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        541,
                                        1818,
                                        2106,
                                        1870
                                    ],
                                    "score": 0.978,
                                    "content": "1.We first brainstorm about 10 seed queries for each scenario with the help of ChatGPT,and",
                                    "type": "text"
                                }
                            ],
                            "index": 13
                        },
                        {
                            "bbox": [
                                592,
                                1866,
                                2106,
                                1918
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        592,
                                        1866,
                                        2106,
                                        1918
                                    ],
                                    "score": 0.972,
                                    "content": "train a model that can directly output the scenario name when given a query as a conditional",
                                    "type": "text"
                                }
                            ],
                            "index": 14
                        },
                        {
                            "bbox": [
                                590,
                                1911,
                                1376,
                                1960
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        1911,
                                        1376,
                                        1960
                                    ],
                                    "score": 0.984,
                                    "content": "generation task on this small synthetic dataset.",
                                    "type": "text"
                                }
                            ],
                            "index": 15
                        },
                        {
                            "bbox": [
                                534,
                                1968,
                                2108,
                                2025
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        534,
                                        1968,
                                        2108,
                                        2025
                                    ],
                                    "score": 0.986,
                                    "content": "2.Using the trained model,we conducted an initial classification for queries in Chatbot Arena",
                                    "type": "text"
                                }
                            ],
                            "index": 16
                        },
                        {
                            "bbox": [
                                592,
                                2017,
                                2106,
                                2068
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        592,
                                        2017,
                                        2106,
                                        2068
                                    ],
                                    "score": 0.982,
                                    "content": "Conversations and ShareGPTas they cover much more scenarios than other datasets.Based",
                                    "type": "text"
                                }
                            ],
                            "index": 17
                        },
                        {
                            "bbox": [
                                595,
                                2067,
                                2105,
                                2112
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        595,
                                        2067,
                                        2105,
                                        2112
                                    ],
                                    "score": 0.977,
                                    "content": "on this preliminary classification, we randomly select up to 5O queries from each scenario",
                                    "type": "text"
                                }
                            ],
                            "index": 18
                        },
                        {
                            "bbox": [
                                589,
                                2108,
                                2108,
                                2165
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        589,
                                        2108,
                                        2108,
                                        2165
                                    ],
                                    "score": 0.986,
                                    "content": "for a secondary manual validation,involving data cleaning and correcting misclassified",
                                    "type": "text"
                                }
                            ],
                            "index": 19
                        },
                        {
                            "bbox": [
                                590,
                                2150,
                                715,
                                2206
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2150,
                                        715,
                                        2206
                                    ],
                                    "score": 0.999,
                                    "content": "labels.",
                                    "type": "text"
                                }
                            ],
                            "index": 20
                        },
                        {
                            "bbox": [
                                540,
                                2221,
                                2105,
                                2266
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        540,
                                        2221,
                                        2105,
                                        2266
                                    ],
                                    "score": 0.98,
                                    "content": "3.We combine the newly-collected dataset and the small synthetic dataset in step 1,and retrain",
                                    "type": "text"
                                }
                            ],
                            "index": 21
                        },
                        {
                            "bbox": [
                                590,
                                2261,
                                2106,
                                2319
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2262,
                                        1967,
                                        2319
                                    ],
                                    "score": 0.975,
                                    "content": "our final classifier. We divide queries in each scenario in an 8:2 train/test split (Tab.",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1968,
                                        2261,
                                        2014,
                                        2319
                                    ],
                                    "score": 0.63,
                                    "content": "\\textcircled { 7 }",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        2016,
                                        2262,
                                        2106,
                                        2319
                                    ],
                                    "score": 0.99,
                                    "content": ".The",
                                    "type": "text"
                                }
                            ],
                            "index": 22
                        },
                        {
                            "bbox": [
                                590,
                                2304,
                                1969,
                                2366
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2304,
                                        1969,
                                        2366
                                    ],
                                    "score": 0.965,
                                    "content": "accuracy and F1 of the final classifier on test set are 72.55 and 74.12,respectively.",
                                    "type": "text"
                                }
                            ],
                            "index": 23
                        }
                    ],
                    "index": 18
                },
                {
                    "type": "text",
                    "bbox": [
                        446,
                        2398,
                        2107,
                        2682
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                2397,
                                2107,
                                2451
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2398,
                                        1764,
                                        2450
                                    ],
                                    "score": 0.986,
                                    "content": "Our scenario classifier is trained from LLaMA-2-13B (Touvron et al.2023b),",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1766,
                                        2397,
                                        2107,
                                        2451
                                    ],
                                    "score": 0.976,
                                    "content": "and we set the max",
                                    "type": "text"
                                }
                            ],
                            "index": 24
                        },
                        {
                            "bbox": [
                                438,
                                2444,
                                2110,
                                2498
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        438,
                                        2444,
                                        1470,
                                        2498
                                    ],
                                    "score": 0.97,
                                    "content": "sequence length as 2,O48,and the max length for query as",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1472,
                                        2449,
                                        1749,
                                        2493
                                    ],
                                    "score": 0.58,
                                    "content": "\\overline { { 2 , 0 4 8 - 5 0 } } \\overline { { = 1 , 9 9 8 } }",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1750,
                                        2444,
                                        2110,
                                        2498
                                    ],
                                    "score": 0.988,
                                    "content": "both in training and",
                                    "type": "text"
                                }
                            ],
                            "index": 25
                        },
                        {
                            "bbox": [
                                442,
                                2487,
                                2110,
                                2544
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        2487,
                                        834,
                                        2544
                                    ],
                                    "score": 0.976,
                                    "content": "inference.If aquery",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        835,
                                        2494,
                                        875,
                                        2539
                                    ],
                                    "score": 0.84,
                                    "content": "Q",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        876,
                                        2487,
                                        1096,
                                        2544
                                    ],
                                    "score": 0.999,
                                    "content": "withlength",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1098,
                                        2494,
                                        1131,
                                        2534
                                    ],
                                    "score": 0.74,
                                    "content": "L",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1133,
                                        2487,
                                        2110,
                                        2544
                                    ],
                                    "score": 0.976,
                                    "content": "exceeds that limit,we truncate it from the middle and",
                                    "type": "text"
                                }
                            ],
                            "index": 26
                        },
                        {
                            "bbox": [
                                439,
                                2530,
                                2112,
                                2593
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        439,
                                        2530,
                                        2112,
                                        2593
                                    ],
                                    "score": 0.982,
                                    "content": "replace the dropped part with a \"..\" since the front and end of the sequence usually contain more",
                                    "type": "text"
                                }
                            ],
                            "index": 27
                        },
                        {
                            "bbox": [
                                442,
                                2579,
                                2106,
                                2638
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        2579,
                                        1949,
                                        2638
                                    ],
                                    "score": 0.987,
                                    "content": "important information for identifying scenario of the (such as the user's instruction):",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1950,
                                        2584,
                                        2106,
                                        2633
                                    ],
                                    "score": 0.93,
                                    "content": "Q _ { 1 : L } \\ \\to",
                                    "type": "inline_equation"
                                }
                            ],
                            "index": 28
                        },
                        {
                            "bbox": [
                                447,
                                2628,
                                855,
                                2685
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        447,
                                        2629,
                                        836,
                                        2681
                                    ],
                                    "score": 0.89,
                                    "content": "[ Q _ { 1 : 9 9 9 } ; . . . ; Q _ { L - 1 0 0 0 : L } ]",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        837,
                                        2628,
                                        855,
                                        2685
                                    ],
                                    "score": 0.735,
                                    "content": "·",
                                    "type": "text"
                                }
                            ],
                            "index": 29
                        }
                    ],
                    "index": 26.5
                },
                {
                    "type": "text",
                    "bbox": [
                        447,
                        2699,
                        2108,
                        2930
                    ],
                    "lines": [
                        {
                            "bbox": [
                                440,
                                2699,
                                2111,
                                2753
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        2699,
                                        2111,
                                        2753
                                    ],
                                    "score": 0.971,
                                    "content": "We train the scenario classifier for3 epochs on the training set,and set the batch size as 64.Without",
                                    "type": "text"
                                }
                            ],
                            "index": 30
                        },
                        {
                            "bbox": [
                                438,
                                2736,
                                2112,
                                2803
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        438,
                                        2736,
                                        2112,
                                        2803
                                    ],
                                    "score": 0.974,
                                    "content": "warmup steps, we set the initial learning rate to 1e-5and cosine decaying to O by the end of training.",
                                    "type": "text"
                                }
                            ],
                            "index": 31
                        },
                        {
                            "bbox": [
                                443,
                                2792,
                                2107,
                                2842
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2793,
                                        983,
                                        2842
                                    ],
                                    "score": 0.987,
                                    "content": "The optimizerisAdamWwith",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        984,
                                        2792,
                                        1348,
                                        2839
                                    ],
                                    "score": 0.92,
                                    "content": "\\beta _ { 1 } = 0 . 9 , \\beta _ { 2 } = 0 . 9 5",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1349,
                                        2793,
                                        2107,
                                        2842
                                    ],
                                    "score": 0.945,
                                    "content": "as in training AUTO-J,and we also use the",
                                    "type": "text"
                                }
                            ],
                            "index": 32
                        },
                        {
                            "bbox": [
                                440,
                                2838,
                                2112,
                                2887
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        2838,
                                        2112,
                                        2887
                                    ],
                                    "score": 0.975,
                                    "content": "speedupand GPU memory saving techniques like DeepSpeed Zero 3,BF16,TF32,and gradient-",
                                    "type": "text"
                                }
                            ],
                            "index": 33
                        },
                        {
                            "bbox": [
                                444,
                                2884,
                                1590,
                                2932
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        444,
                                        2884,
                                        1590,
                                        2932
                                    ],
                                    "score": 0.968,
                                    "content": "checkpointing.The loss isonly calculated on the output end as well.",
                                    "type": "text"
                                }
                            ],
                            "index": 34
                        }
                    ],
                    "index": 32
                }
            ],
            "page_idx": 0,
            "page_size": [
                2550,
                3300
            ],
            "discarded_blocks": [
                {
                    "type": "discarded",
                    "bbox": [
                        447,
                        2959,
                        2111,
                        3051
                    ],
                    "lines": [
                        {
                            "bbox": [
                                496,
                                2954,
                                2110,
                                3013
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        496,
                                        2954,
                                        1354,
                                        3013
                                    ],
                                    "score": 0.985,
                                    "content": "4This dataset is collected fromhttps: //sharegpt .com/",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1358,
                                        2963,
                                        2110,
                                        3008
                                    ],
                                    "score": 0.988,
                                    "content": "containing shared conversationswithChatGPTor",
                                    "type": "text"
                                }
                            ]
                        },
                        {
                            "bbox": [
                                443,
                                3003,
                                1136,
                                3053
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        3003,
                                        1136,
                                        3053
                                    ],
                                    "score": 0.985,
                                    "content": "GPT-4. We use a public available subset of it.",
                                    "type": "text"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "discarded",
                    "bbox": [
                        451,
                        113,
                        1222,
                        155
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                108,
                                1225,
                                161
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        108,
                                        1225,
                                        161
                                    ],
                                    "score": 0.983,
                                    "content": "Published as a conference paper at ICLR 2024",
                                    "type": "text"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "discarded",
                    "bbox": [
                        1252,
                        3132,
                        1295,
                        3168
                    ],
                    "lines": [
                        {
                            "bbox": [
                                1245,
                                3125,
                                1303,
                                3185
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        1245,
                                        3125,
                                        1303,
                                        3185
                                    ],
                                    "score": 0.999,
                                    "content": "15",
                                    "type": "text"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "discarded",
                    "bbox": [
                        2027,
                        1402,
                        2105,
                        1456
                    ],
                    "lines": [
                        {
                            "bbox": [
                                2019,
                                1397,
                                2110,
                                1460
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        2019,
                                        1397,
                                        2110,
                                        1460
                                    ],
                                    "score": 0.69,
                                    "content": "\\ S 3 . 2",
                                    "type": "inline_equation"
                                }
                            ]
                        }
                    ]
                }
            ],
            "para_blocks": [
                {
                    "type": "table",
                    "bbox": [
                        511,
                        339,
                        2041,
                        1084
                    ],
                    "blocks": [
                        {
                            "type": "table_body",
                            "bbox": [
                                511,
                                339,
                                2041,
                                1084
                            ],
                            "group_id": 0,
                            "lines": [
                                {
                                    "bbox": [
                                        511,
                                        339,
                                        2041,
                                        1084
                                    ],
                                    "spans": [
                                        {
                                            "bbox": [
                                                511,
                                                339,
                                                2041,
                                                1084
                                            ],
                                            "score": 0.982,
                                            "html": "<table><tr><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td><td>scenario</td><td>train</td><td>test</td></tr><tr><td>others</td><td>317</td><td></td><td></td><td>40</td><td>11</td><td>classification_identification</td><td>24</td><td>6</td></tr><tr><td>functional_writing</td><td>128</td><td></td><td>explaining_code</td><td>40</td><td>10</td><td>language_polishing</td><td>2222</td><td>4</td></tr><tr><td>brainstorming</td><td>90</td><td></td><td>writing_legal_document</td><td>40</td><td>10</td><td>chitchat</td><td></td><td>7</td></tr><tr><td>seeking_advice</td><td>88</td><td></td><td>asking_how_to_question</td><td>40</td><td>10</td><td>writing_product_description</td><td>20</td><td>5</td></tr><tr><td>open_question</td><td>77</td><td></td><td>writing_presentation_script</td><td>38</td><td>10</td><td>data_analysis</td><td>18</td><td>5</td></tr><tr><td>explaining_general</td><td>66</td><td>17</td><td>writing_social_media_post</td><td>38</td><td>10</td><td>writing_marketing_materials</td><td>17</td><td>5</td></tr><tr><td>instructional_rewriting</td><td>58</td><td>15</td><td>question_generation</td><td>38</td><td>10</td><td>note_summarization</td><td>17</td><td>4</td></tr><tr><td>verifying_fact</td><td>49</td><td>13</td><td>planning</td><td></td><td>10</td><td>paraphrasing</td><td>17</td><td>5</td></tr><tr><td>analyzing_general</td><td>49</td><td>13</td><td>writing_blog_post</td><td>3830</td><td>9</td><td>writing_technical_document</td><td>17</td><td>5</td></tr><tr><td>title_generation</td><td>48</td><td>12</td><td>writing_job_application</td><td>36</td><td>10</td><td>text_simplification</td><td>16</td><td>5</td></tr><tr><td>code_generation</td><td>48</td><td>12</td><td>writing_personal_essay</td><td>36</td><td>10</td><td>information_extraction</td><td>16</td><td>2</td></tr><tr><td>roleplay</td><td>47</td><td>12</td><td>value_judgement</td><td>35</td><td>9</td><td>writing_biography</td><td>16</td><td>4</td></tr><tr><td>rejecting</td><td>45</td><td>12</td><td>code_to_code_translation</td><td>32</td><td>9</td><td>text_correction</td><td>12</td><td>6</td></tr><tr><td>creative_writing</td><td>45</td><td>12</td><td>writing_advertisement</td><td>31</td><td></td><td>reading_comprehension</td><td>12</td><td>3</td></tr><tr><td>exam_question_without_math</td><td>44</td><td>12</td><td>writing_email</td><td>30</td><td></td><td>keywords_extraction</td><td>12</td><td>3</td></tr><tr><td>writing_song_lyrics</td><td>44</td><td>11</td><td>recommendation</td><td>2928</td><td>888</td><td>topic_modeling</td><td>10</td><td>3</td></tr><tr><td>text_to_text_translation</td><td>43</td><td>11</td><td>ranking</td><td></td><td>8</td><td>writing_scientific_paper</td><td>10</td><td>3</td></tr><tr><td>text_summarization</td><td>43</td><td>12</td><td>counterfactual</td><td>26</td><td>7</td><td>peer_review</td><td>7</td><td>2</td></tr><tr><td>code_correction_rewriting</td><td>43</td><td>11</td><td>exam_question_with_math</td><td>24</td><td>4</td><td>code_simplification</td><td>6</td><td>2</td></tr><tr><td>math_reasoning</td><td>41</td><td>12</td><td>writing_news_article</td><td>24</td><td>6</td><td>overll</td><td>2383623</td><td></td></tr></table>",
                                            "type": "table",
                                            "image_path": "9b49904b7632dd696018ae665146de7b97c693e7ae4ecdfc8a73550ff436de4a.jpg"
                                        }
                                    ]
                                }
                            ],
                            "index": 1,
                            "virtual_lines": [
                                {
                                    "bbox": [
                                        511,
                                        339,
                                        2041,
                                        587.3333333333334
                                    ],
                                    "spans": [],
                                    "index": 0
                                },
                                {
                                    "bbox": [
                                        511,
                                        587.3333333333334,
                                        2041,
                                        835.6666666666667
                                    ],
                                    "spans": [],
                                    "index": 1
                                },
                                {
                                    "bbox": [
                                        511,
                                        835.6666666666667,
                                        2041,
                                        1084.0
                                    ],
                                    "spans": [],
                                    "index": 2
                                }
                            ]
                        }
                    ],
                    "index": 1
                },
                {
                    "type": "text",
                    "bbox": [
                        452,
                        1121,
                        2110,
                        1214
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1116,
                                2114,
                                1176
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1116,
                                        2114,
                                        1176
                                    ],
                                    "score": 0.967,
                                    "content": "Table 7: The scenario distribution in the training and test set for scenario classifier, note that “rejecting”",
                                    "type": "text"
                                }
                            ],
                            "index": 3
                        },
                        {
                            "bbox": [
                                444,
                                1165,
                                1807,
                                1219
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        444,
                                        1165,
                                        1807,
                                        1219
                                    ],
                                    "score": 0.971,
                                    "content": "and \"peer_review”are two early-defined scenarios that have been removed by us.",
                                    "type": "text"
                                }
                            ],
                            "index": 4
                        }
                    ],
                    "index": 3.5,
                    "bbox_fs": [
                        443,
                        1116,
                        2114,
                        1219
                    ]
                },
                {
                    "type": "title",
                    "bbox": [
                        447,
                        1298,
                        1523,
                        1352
                    ],
                    "lines": [
                        {
                            "bbox": [
                                434,
                                1290,
                                1531,
                                1363
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        434,
                                        1290,
                                        1531,
                                        1363
                                    ],
                                    "score": 0.973,
                                    "content": "BTRAINING DETAILS OF SCENARIO CLASSIFIER",
                                    "type": "text"
                                }
                            ],
                            "index": 5
                        }
                    ],
                    "index": 5
                },
                {
                    "type": "text",
                    "bbox": [
                        430,
                        1398,
                        2111,
                        1704
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                1401,
                                2018,
                                1457
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1401,
                                        2018,
                                        1457
                                    ],
                                    "score": 0.985,
                                    "content": "In this section we describe in detail the training process of the scenario classifier mentioned in",
                                    "type": "text"
                                }
                            ],
                            "index": 6
                        },
                        {
                            "bbox": [
                                442,
                                1469,
                                2115,
                                1526
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        1469,
                                        2115,
                                        1526
                                    ],
                                    "score": 0.987,
                                    "content": "We model the scenario classification task as a generation task.The classifier are re-",
                                    "type": "text"
                                }
                            ],
                            "index": 7
                        },
                        {
                            "bbox": [
                                439,
                                1518,
                                2111,
                                1572
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        439,
                                        1518,
                                        2111,
                                        1572
                                    ],
                                    "score": 0.983,
                                    "content": "quired to generate only the scenario name when given the query，with the prompt as",
                                    "type": "text"
                                }
                            ],
                            "index": 8
                        },
                        {
                            "bbox": [
                                443,
                                1563,
                                2111,
                                1620
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        1563,
                                        2111,
                                        1620
                                    ],
                                    "score": 0.964,
                                    "content": "\"Identifythe scenario forthe user'squery，output'default’ifyou are",
                                    "type": "text"
                                }
                            ],
                            "index": 9
                        },
                        {
                            "bbox": [
                                442,
                                1607,
                                2108,
                                1664
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        1607,
                                        2108,
                                        1664
                                    ],
                                    "score": 0.98,
                                    "content": "uncertain.\\n\\nQuery:\\n\\n{input}\\n\\nScenario:\"(the \"default\" scenario in the prompt is the",
                                    "type": "text"
                                }
                            ],
                            "index": 10
                        },
                        {
                            "bbox": [
                                446,
                                1657,
                                1050,
                                1709
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        446,
                                        1657,
                                        1050,
                                        1709
                                    ],
                                    "score": 0.972,
                                    "content": "early naming for \"others\" scenario).",
                                    "type": "text"
                                }
                            ],
                            "index": 11
                        }
                    ],
                    "index": 8.5,
                    "bbox_fs": [
                        439,
                        1401,
                        2115,
                        1709
                    ]
                },
                {
                    "type": "text",
                    "bbox": [
                        447,
                        1727,
                        1178,
                        1773
                    ],
                    "lines": [
                        {
                            "bbox": [
                                440,
                                1722,
                                1180,
                                1782
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        1722,
                                        1180,
                                        1782
                                    ],
                                    "score": 0.979,
                                    "content": "In general, the training involves three steps:",
                                    "type": "text"
                                }
                            ],
                            "index": 12
                        }
                    ],
                    "index": 12,
                    "bbox_fs": [
                        440,
                        1722,
                        1180,
                        1782
                    ]
                },
                {
                    "type": "list",
                    "bbox": [
                        541,
                        1817,
                        2106,
                        2355
                    ],
                    "lines": [
                        {
                            "bbox": [
                                541,
                                1818,
                                2106,
                                1870
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        541,
                                        1818,
                                        2106,
                                        1870
                                    ],
                                    "score": 0.978,
                                    "content": "1.We first brainstorm about 10 seed queries for each scenario with the help of ChatGPT,and",
                                    "type": "text"
                                }
                            ],
                            "index": 13,
                            "is_list_start_line": true
                        },
                        {
                            "bbox": [
                                592,
                                1866,
                                2106,
                                1918
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        592,
                                        1866,
                                        2106,
                                        1918
                                    ],
                                    "score": 0.972,
                                    "content": "train a model that can directly output the scenario name when given a query as a conditional",
                                    "type": "text"
                                }
                            ],
                            "index": 14
                        },
                        {
                            "bbox": [
                                590,
                                1911,
                                1376,
                                1960
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        1911,
                                        1376,
                                        1960
                                    ],
                                    "score": 0.984,
                                    "content": "generation task on this small synthetic dataset.",
                                    "type": "text"
                                }
                            ],
                            "index": 15,
                            "is_list_end_line": true
                        },
                        {
                            "bbox": [
                                534,
                                1968,
                                2108,
                                2025
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        534,
                                        1968,
                                        2108,
                                        2025
                                    ],
                                    "score": 0.986,
                                    "content": "2.Using the trained model,we conducted an initial classification for queries in Chatbot Arena",
                                    "type": "text"
                                }
                            ],
                            "index": 16,
                            "is_list_start_line": true
                        },
                        {
                            "bbox": [
                                592,
                                2017,
                                2106,
                                2068
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        592,
                                        2017,
                                        2106,
                                        2068
                                    ],
                                    "score": 0.982,
                                    "content": "Conversations and ShareGPTas they cover much more scenarios than other datasets.Based",
                                    "type": "text"
                                }
                            ],
                            "index": 17
                        },
                        {
                            "bbox": [
                                595,
                                2067,
                                2105,
                                2112
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        595,
                                        2067,
                                        2105,
                                        2112
                                    ],
                                    "score": 0.977,
                                    "content": "on this preliminary classification, we randomly select up to 5O queries from each scenario",
                                    "type": "text"
                                }
                            ],
                            "index": 18
                        },
                        {
                            "bbox": [
                                589,
                                2108,
                                2108,
                                2165
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        589,
                                        2108,
                                        2108,
                                        2165
                                    ],
                                    "score": 0.986,
                                    "content": "for a secondary manual validation,involving data cleaning and correcting misclassified",
                                    "type": "text"
                                }
                            ],
                            "index": 19
                        },
                        {
                            "bbox": [
                                590,
                                2150,
                                715,
                                2206
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2150,
                                        715,
                                        2206
                                    ],
                                    "score": 0.999,
                                    "content": "labels.",
                                    "type": "text"
                                }
                            ],
                            "index": 20,
                            "is_list_end_line": true
                        },
                        {
                            "bbox": [
                                540,
                                2221,
                                2105,
                                2266
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        540,
                                        2221,
                                        2105,
                                        2266
                                    ],
                                    "score": 0.98,
                                    "content": "3.We combine the newly-collected dataset and the small synthetic dataset in step 1,and retrain",
                                    "type": "text"
                                }
                            ],
                            "index": 21,
                            "is_list_start_line": true
                        },
                        {
                            "bbox": [
                                590,
                                2261,
                                2106,
                                2319
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2262,
                                        1967,
                                        2319
                                    ],
                                    "score": 0.975,
                                    "content": "our final classifier. We divide queries in each scenario in an 8:2 train/test split (Tab.",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1968,
                                        2261,
                                        2014,
                                        2319
                                    ],
                                    "score": 0.63,
                                    "content": "\\textcircled { 7 }",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        2016,
                                        2262,
                                        2106,
                                        2319
                                    ],
                                    "score": 0.99,
                                    "content": ".The",
                                    "type": "text"
                                }
                            ],
                            "index": 22
                        },
                        {
                            "bbox": [
                                590,
                                2304,
                                1969,
                                2366
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        590,
                                        2304,
                                        1969,
                                        2366
                                    ],
                                    "score": 0.965,
                                    "content": "accuracy and F1 of the final classifier on test set are 72.55 and 74.12,respectively.",
                                    "type": "text"
                                }
                            ],
                            "index": 23,
                            "is_list_end_line": true
                        }
                    ],
                    "index": 18,
                    "bbox_fs": [
                        534,
                        1818,
                        2108,
                        2366
                    ]
                },
                {
                    "type": "text",
                    "bbox": [
                        446,
                        2398,
                        2107,
                        2682
                    ],
                    "lines": [
                        {
                            "bbox": [
                                443,
                                2397,
                                2107,
                                2451
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2398,
                                        1764,
                                        2450
                                    ],
                                    "score": 0.986,
                                    "content": "Our scenario classifier is trained from LLaMA-2-13B (Touvron et al.2023b),",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1766,
                                        2397,
                                        2107,
                                        2451
                                    ],
                                    "score": 0.976,
                                    "content": "and we set the max",
                                    "type": "text"
                                }
                            ],
                            "index": 24
                        },
                        {
                            "bbox": [
                                438,
                                2444,
                                2110,
                                2498
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        438,
                                        2444,
                                        1470,
                                        2498
                                    ],
                                    "score": 0.97,
                                    "content": "sequence length as 2,O48,and the max length for query as",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1472,
                                        2449,
                                        1749,
                                        2493
                                    ],
                                    "score": 0.58,
                                    "content": "\\overline { { 2 , 0 4 8 - 5 0 } } \\overline { { = 1 , 9 9 8 } }",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1750,
                                        2444,
                                        2110,
                                        2498
                                    ],
                                    "score": 0.988,
                                    "content": "both in training and",
                                    "type": "text"
                                }
                            ],
                            "index": 25
                        },
                        {
                            "bbox": [
                                442,
                                2487,
                                2110,
                                2544
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        2487,
                                        834,
                                        2544
                                    ],
                                    "score": 0.976,
                                    "content": "inference.If aquery",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        835,
                                        2494,
                                        875,
                                        2539
                                    ],
                                    "score": 0.84,
                                    "content": "Q",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        876,
                                        2487,
                                        1096,
                                        2544
                                    ],
                                    "score": 0.999,
                                    "content": "withlength",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1098,
                                        2494,
                                        1131,
                                        2534
                                    ],
                                    "score": 0.74,
                                    "content": "L",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1133,
                                        2487,
                                        2110,
                                        2544
                                    ],
                                    "score": 0.976,
                                    "content": "exceeds that limit,we truncate it from the middle and",
                                    "type": "text"
                                }
                            ],
                            "index": 26
                        },
                        {
                            "bbox": [
                                439,
                                2530,
                                2112,
                                2593
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        439,
                                        2530,
                                        2112,
                                        2593
                                    ],
                                    "score": 0.982,
                                    "content": "replace the dropped part with a \"..\" since the front and end of the sequence usually contain more",
                                    "type": "text"
                                }
                            ],
                            "index": 27
                        },
                        {
                            "bbox": [
                                442,
                                2579,
                                2106,
                                2638
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        442,
                                        2579,
                                        1949,
                                        2638
                                    ],
                                    "score": 0.987,
                                    "content": "important information for identifying scenario of the (such as the user's instruction):",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        1950,
                                        2584,
                                        2106,
                                        2633
                                    ],
                                    "score": 0.93,
                                    "content": "Q _ { 1 : L } \\ \\to",
                                    "type": "inline_equation"
                                }
                            ],
                            "index": 28
                        },
                        {
                            "bbox": [
                                447,
                                2628,
                                855,
                                2685
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        447,
                                        2629,
                                        836,
                                        2681
                                    ],
                                    "score": 0.89,
                                    "content": "[ Q _ { 1 : 9 9 9 } ; . . . ; Q _ { L - 1 0 0 0 : L } ]",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        837,
                                        2628,
                                        855,
                                        2685
                                    ],
                                    "score": 0.735,
                                    "content": "·",
                                    "type": "text"
                                }
                            ],
                            "index": 29
                        }
                    ],
                    "index": 26.5,
                    "bbox_fs": [
                        438,
                        2397,
                        2112,
                        2685
                    ]
                },
                {
                    "type": "text",
                    "bbox": [
                        447,
                        2699,
                        2108,
                        2930
                    ],
                    "lines": [
                        {
                            "bbox": [
                                440,
                                2699,
                                2111,
                                2753
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        2699,
                                        2111,
                                        2753
                                    ],
                                    "score": 0.971,
                                    "content": "We train the scenario classifier for3 epochs on the training set,and set the batch size as 64.Without",
                                    "type": "text"
                                }
                            ],
                            "index": 30
                        },
                        {
                            "bbox": [
                                438,
                                2736,
                                2112,
                                2803
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        438,
                                        2736,
                                        2112,
                                        2803
                                    ],
                                    "score": 0.974,
                                    "content": "warmup steps, we set the initial learning rate to 1e-5and cosine decaying to O by the end of training.",
                                    "type": "text"
                                }
                            ],
                            "index": 31
                        },
                        {
                            "bbox": [
                                443,
                                2792,
                                2107,
                                2842
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        443,
                                        2793,
                                        983,
                                        2842
                                    ],
                                    "score": 0.987,
                                    "content": "The optimizerisAdamWwith",
                                    "type": "text"
                                },
                                {
                                    "bbox": [
                                        984,
                                        2792,
                                        1348,
                                        2839
                                    ],
                                    "score": 0.92,
                                    "content": "\\beta _ { 1 } = 0 . 9 , \\beta _ { 2 } = 0 . 9 5",
                                    "type": "inline_equation"
                                },
                                {
                                    "bbox": [
                                        1349,
                                        2793,
                                        2107,
                                        2842
                                    ],
                                    "score": 0.945,
                                    "content": "as in training AUTO-J,and we also use the",
                                    "type": "text"
                                }
                            ],
                            "index": 32
                        },
                        {
                            "bbox": [
                                440,
                                2838,
                                2112,
                                2887
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        440,
                                        2838,
                                        2112,
                                        2887
                                    ],
                                    "score": 0.975,
                                    "content": "speedupand GPU memory saving techniques like DeepSpeed Zero 3,BF16,TF32,and gradient-",
                                    "type": "text"
                                }
                            ],
                            "index": 33
                        },
                        {
                            "bbox": [
                                444,
                                2884,
                                1590,
                                2932
                            ],
                            "spans": [
                                {
                                    "bbox": [
                                        444,
                                        2884,
                                        1590,
                                        2932
                                    ],
                                    "score": 0.968,
                                    "content": "checkpointing.The loss isonly calculated on the output end as well.",
                                    "type": "text"
                                }
                            ],
                            "index": 34
                        }
                    ],
                    "index": 32,
                    "bbox_fs": [
                        438,
                        2699,
                        2112,
                        2932
                    ]
                }
            ]
        }
    ],
    "_backend": "pipeline",
    "_version_name": "2.1.8"
}