DOGLIONI et al.: PLANT MICROBIAL FUEL CELLS: ENERGY SOURCES AND BIOSENSORS FOR BATTERY-FREE SMART AGRICULTURE

highest possible accuracy but rather to design the most portable, practical, and inexpensive setup to execute self-powered EIS on the field. If a higher accuracy was ever to be required, printable reference electrodes [37] can easily be added to the sensor, without any additional energy expenditure. The two EIS terminals consist of two electrodes, which are also used for collecting the energy required to execute the EISmeasurements. Our novel approach ensures that thePMFCacts both as an energy source and a biosensor for our application: in the first case, the PMFC electrodes are connected to the dc/dc, in the second to the EIS AFE.

2) Service Circuitry: We can distinguish two different sec- tions of the SC:OCV sampling and the IPSP. TheOCV sampling circuit is a high-impedance resistive divider that samples 50% of the steady-state (i.e., after cell rest) OCV into the dc/dc’s MPP reference voltage capacitor. The resistive divider is briefly connected to the circuit thanks to the wakeup signal, and then it is unconnected through two switches. The IPSP acts as the interface between the PMFC and the sensor node and has a twofold purpose. First, it turns the power flow on/off from the PMFC to the dc/dc input, to either harvest energy from the cell or to unload it to ensure cell recovery. Second, the IPSP also controls whether the PMFC is being used as a power source (i.e., PMFC connected to the DC/DC), or if it is being used as EIS biosensor (i.e., PMFC connected to the EIS AFE).

During wakeup, the power supplies of the IPSP and OCV sampling control and synchronize their activity. Fig. 2 shows the time development of the supply voltages of the IPSP, the sampling, and the storage capacitor during an entire application cycle. The OCV sampling section is powered only at the start of the wakeup period. On the other hand, the IPSP is activated only once OCV has been successfully sampled so as not to disrupt its measurement by loading the PMFC before time. To grant the synchronization between these two phases, the wakeupharvesting circuitry charges two separate capacitors, one responsible for OCV sampling (CSMP) and one for the IPSP’s supply (CWK).CSMP must activate and deactivateOCV sampling strictly beforeCWK activates IPSP, so that sampling ends before harvesting begins [see Fig. 2(A)]. This can be done by properly sizingCSMP andCWK,withCWK>CSMP.The IPSPalso taps into the storage capacitor whenCWK is depleted to sustain harvesting beyond thewakeup period. In particular, to ensure correct supply handoff, CWK must be able to hold the IPSP’s supply above its operative voltage (1.65 V) as the storage capacitor charges above its load-enable threshold, VMIN = 2 V [see Fig. 2(B)]. If the PMFC cannot charge the storage capacitor above VMIN in time, harvesting cannot continue as the IPSP is unpowered. The cell is deemed inactive, and a newwakeup tentative will be done at the next wakeup message reception.

Below VMIN, the storage loads are detached through a digital signal generated by the BQ25505, the VBAT,OK signal, to reduce the minimum power required for cold start (see Section IV-B). Right after wakeup, when the storage crosses VMIN, VBAT,OK activates the loads on VCAP (MCU, voltage monitors). TheMCU boots up in ultralow power mode LPM 4.5, waiting for an interrupt. When VSTOR charges up to VEIS, a voltage monitor interrupts the MCU, which then launches an EIS measurement cycle by toggling theM signal, which powers the EIS AFE and controls the IPSP to connect the electrodes to the AFE. Once the measurement is finished, EIS circuitry is power-gated, and theMCU enters LPM 4.5 again, waiting until VTX is reached. At that point, transmission is issued by powering the LoRa modem through the S signal. After the transmission, the MCU remains active until the storage element drops below VMIN—5 mV. The BQ25505’s internal PFET disconnects the storage element from the sensor node supply line at that voltage. This interrupts the power supply to the IPSP and all components, sending the node into rest mode until a new wakeup signal is received. To save precious leftover storage energy during cell rest, the BQ25505 is held in a reset state, only consuming 5 nA. If rest lasts a long time and the storage is discharged below the cold-start voltage (VCS = 1.8 V), we will incur in cold start of the DC/DC converter upon wakeup. Power distribution and component power-gating are done through SPST (Vishay Sili- conix, SiP32431DN) and SPDT (Vishay Siliconix, DG4157E) switches.

IV. EXPERIMENTAL RESULTS

The initial test phase concerned PMFC reactor characteriza- tion: first, we focused on their construction, startup, and oper- ation, and then we assessed their performance in cold-starting storage capacitors through the BQ25505. After that, we moved on to analyzing the time development of the impedance spectra of active and inactive PMFCs: with this experiment, we confirm that the impedance spectrum of a PMFC varies significantly both from day to day and from active and inactive plants. These significant changes in EIS results can be tracked to more than just common MFC parameters, such as biofilm formation, but also to plant health and status. We executed this first set of EIS measurements with a reference potentiostat (Autolab PGSTAT302 N) for three consecutive days. These first EIS measurements also allowed us to set up the MAX30134’s mea- surement range for PMFCs.We then validated theMAX30134’s capabilities in measuring a PMFC’s impedance spectrum by comparing its measurements to the reference potentiostat and in terms of low-power energy consumption by measuring its energy consumption during a prototype EIS sweep. As a last step, we estimated the energy consumption of the atomic tasks of the application scenariowe considered:message transmission and EIS measurement. This allowed us to dimension the energy storage element required for this test case and confirm the feasibility of a simplemonitoring application based on this node.

A. Reactor Startup and Operation

As a preliminary study, we built an MFC and confirmed through experiments that the cell’s durability and power pro- duction capabilities are comparable to the expected results in the literature [38]. We analyzed the PMFC’s performance by adding the plant to a cell of the same volume. We verified that drawing current from the cell during startup or adding water to it delayed cell stabilization, as the bacteria colony still had to get acclimatized. This led us to start new cells up by waterlogging them and leaving them unloaded until OCV stabilized above

465