Remark 3.1 (An alternative definition implemented in SOPHIS)

One potential alternative to the presented formula (4) could be to replace each occur- rence of χui in the last term with χT . Intuitively, this alternative has the appeal that χT can be factored out of the sum, and the remaining formula is totally FX-free within the asset’s currency. Since this is what the front office system SOPHIS does in its col- umn “Result curr. global”, when the global currency is EUR, let us briefly comment on the implied change of meaning. When using χT always, the obtained PnL intuitively assumes that each received coupon amount cu at some time u is held in cash (not on a bank account, and also not invested in some other asset) between u and T . Changes in the FX rate at later time points then induce significant PnL movements to cash amounts that have long left the position under consideration. For example, consider a bond that pays a high coupon rate, so a lot of cash leaves the asset over time. But if the FX rate χ sharply increases at time T , all these past cash amounts induce PnL, even though they might have been consumed or spent elsewhere already and should not induce PnL at T anymore.

The change of the carry PnL part is especially important, if one aggregates several assets to a portfolio and wishes to decompose the PnL of the whole portfolio. It is then well possible that an asset is bought or sold at some time point u in (t, T ]. For instance, it could be that at time u one receives a coupon payment from one asset and uses it to purchase another asset, or it could be that additional money flows into (out of) the asset to increase (reduce) the holdings. In qualitative terms, this is similar to the aforementioned coupon cash outflows, because we have to deal with in- and outflows in our PnL measurement. In order to take such dynamic rebalancings of a whole portfolio P into account in the PnL decomposition, we recommend to split the time period (t, T ] into several parts t =: t0 < t1 < .. . ≤ tn = T , where the ti include all transaction dates of the portfolio, i.e. all dates at which an asset is either sold or bought. Then finally, we obtain the decomposition ∑ ∑

$$
\begin{array}{rl}&{P_{(t,T]}^{(P)}=\underbrace{\sum_{A\in P}\sum_{i=1}^{n-1}P_{(t_{i-1},t_{i}]}^{(A)}(\chi)}_{=P_{(t,T]}^{(P)}(\chi)}+\underbrace{\sum_{A\in P}\sum_{i=1}^{n-1}P_{(t_{i-1},t_{i}]}^{(A)}(r)}_{=P_{(t,T]}^{(P)}(r)}}\\ &{\quad\quad\quad\quad\quad\quad+\underbrace{\sum_{A\in P}\sum_{i=1}^{n-1}P_{(t_{i-1},t_{i}]}^{(A)}(x)}_{=P_{(t,T]}^{(P)}(x)}+\underbrace{\sum_{A\in P}\sum_{i=1}^{n-1}P_{(t_{i-1},t_{i}]}^{(A)}(\mathrm{carry})}_{=P_{(t,T]}^{(P)}(\mathrm{carry})}.}\end{array}
$$

(5)

(6)

For the computation of this decomposition, required is availability of χt, At = At(rt, λt, xt), rt, and xt at all time points t0, . . . , tn, and for all assets A in the portfolio P , as well as pricing routines that implement the asset prices in dependence on given parameters r, and x.