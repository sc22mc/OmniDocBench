arXiv:2302.00812v1 [eess.SY] 2 Feb 2023

# Event-triggered Hybrid Energy-aware Scheduling in Manufacturing Systems

Zhean Shao, Wen Li, and Ying Tan

University of Melbourne, Melbourne, VIC, Australia 

$(e-mail: zheans@student.unimelb.edu.au,$  

$\{wen.li3, yingt\} @unimelb.edu.au, )$ 

**Abstract:** Incorporating renewable energy sources (RESs) into manufacturing systems has been an active research area in order to address many challenges originating from the unpredictable nature of RESs such as photovoltaics. In the energy-aware scheduling for manufacturing systems, the traditional off-line scheduling techniques cannot always work well due to their lack of robustness with respect to uncertainties coming from imprecise models or unexpected situations. On the other hand, on-line scheduling or rescheduling, which can improve the robustness by using the model and the latest measurements simultaneously, suffer from a high computational cost. This work proposes a hybrid scheduling framework, which combines the advantages of both off-line scheduling and on-line scheduling, to provide a balanced solution between robustness and computational cost. A novel concept of partially-dispatchable state is introduced. It can be treated as a constant in scheduling when the model works well. When the model does not work well, it is triggered as the variable to tune to improve the performance. Such an event-triggered structure can reduce the number of rescheduling and computational costs while achieving a reasonable performance and enhancing system robustness. Moreover, the choice of partiallydispatchable state also provides an extra design freedom in achieving green manufacturing. Simulation examples on a manufacturing system, of which consists a 100-kW solar photovoltaic system, a 10-machine flow shop production line, a 50-kWh energy storage system, a 100-kW gas turbine, and the grid for power supply, demonstrating the validity and applicability of this event-triggered hybrid scheduling (ETHS) framework.

*Keywords:* Production planning and control, Energy-aware scheduling, Event-triggered hybrid scheduling

# 1. INTRODUCTION

Due to the global energy crisis and 2050 net zero emission target set in Paris Agreement, renewable energy sources  $(RESs)$  such as solar energy, and energy storage systems (ESSs) such as batteries are gradually adopted by the manufacturing industry. However, as pointed out in Impram et al.  $(2020)$ , RESs are hardly predictable, which makes the energy-aware scheduling in manufacturing systems extremely challenging to guarantee the production efficiency while improving the efficiency of RESs.

Many techniques have been developed to improve the efficiency and optimality of energy-aware scheduling. These techniques can be classified into two major categories: offline optimisation (scheduling) and on-line scheduling.

Off-line scheduling provides an optimal planning for the production lines and energy management for a given cost function based the predicted performance using the various models of the production lines and RESs without using real-time observed data. In off-line scheduling, the choice of the cost function is one of the major considerations. For example, Dong and Ye  $(2022)$  highlighted the need of reducing the emission in the cost function along with the guarantee of the production throughput, leading to less utilisation rate of RESs. Pamparana et al.  $(2017)$  utilised 

a cost function that can balance or coordinate production schedule and energy management so that the battery management and production schedule are optimised simultaneously. Similarly, Karimi and Kwon (2021) simulated a 3-machine job shop and optimise with a multi-objective function that the balance between makespan  $1$  and cost related to the energy management. Different types of RESs have been also considered. For example, a diesel generator was considered in Thornton et al.  $(2017)$ . As the off-line scheduling only runs once for the energy-aware scheduling, the computational cost is not an issue. Thus it can handle a very complex system with many constraints and tuning parameters for a long-term prediction. In the offline scheduling, the prediction is based on the model of the production line, and RESs, the modeling uncertainties coming from the unpredictable nature of RESs or the unexpected machine failures of the production line are inevitable. In general, off-line scheduling is not robust with respect to these modeling uncertainties.

Compared with the model-based off-line scheduling, online scheduling also utilises the real-time data measured from various sensors equipped in green manufacturing systems. It consists of two different types of strategies. One

 $^{1}$  The makespan is the time difference between the start and finish of a sequence of jobs or tasks.

is on-line adjustment to minimize the mismatch between the off-line scheduling and the measured current status in terms of the green manufacturing systems. For example, Beier et al.  $(2017)$  compensated the mismatch between real-time RES supply and production demand from the off-line scheduling while Pierri et al.  $(2021)$  dealt with the mismatch in order to improve utilisation rate for RES. The other one is on-line rescheduling, in which the current measurements are used to predict the future performance based on the models of the production lines and RESs. Online rescheduling depends on the the cost function and the re-scheduling rate. For example, in Zhai et al.  $(2017)$ , a rescheduling happened hourly. The production cost and tardiness were considered in the selection of the cost function in Nayak et al.  $(2019)$ . As on-line measurements, which reflect the current status of the green manufacturing system, are used in the prediction along with the models, the on-line schedule is more robustness to modeling uncertainties compared with the off-line scheduling. However, both on-line adjustment and on-line rescheduling require an extra computational power to solve some scheduling problem. In particular, for a complex system with many tuning parameters and constraints and a longer prediction horizon, the computational cost becomes expensive.

There are some attempts trying to combine off-line scheduling and on-line scheduling to balance the robustness with the modeling uncertainties and the computational cost. For example, Beier  $(2017)$  suggested using the off-line scheduling as a reference for production while managing batteries in real-time to deal with the variance to the prediction. In Biel et al.  $(2018)$ , production schedule was decided in off-line scheduling, while on-line adjustment focuses on dealing with difference between wind power prediction and observation. Similarly in Fazli Khalaf and Wang  $(2018)$ , grid procurement was considered as a tuning parameter in the on-line scheduling when using the reference coming from the off-line scheduling reference. These attempts are highly heuristic and case-dependent. A systematic way of combining off-line scheduling and online scheduling is still lacking.

This paper focuses on providing a systematic design framework for energy-aware scheduling in manufacturing systems based on the available imprecise models (off-line scheduling) and measurement data (on-line schedule). A so-called event-triggered hybrid scheduling (ETHS) is proposed based on a novel concept of partially dispatchable state, which can be served as an extra design freedom to balance the computational cost and the performance when the unexpected situations happen. When the observed performance is satisfying, no rescheduling is triggered to reduce the computational cost. When the observed performance is not satisfying, this partially dispatchable state can be triggered as a part of rescheduling to improve the performance. Such a systematic design is based on a rigorous mathematical problem formulation for off-line scheduling and on-line scheduling, to which are applicable to a large class of green manufacturing systems.

 This paper is organized as follows. Section 2 formulates both off-line scheduling and on-line scheduling, followed by the detailed design steps in the proposed ETHS in Section 3. A simulation example is presented in Section 4. Section  $5$  concludes this work.

# 2. OFF-LINE SCHEDULING AND ON-LINE SCHEDULING IN A MANUFACTURING SYSTEM

This paper focuses on a class of manufacturing systems, of which consist a set of interconnected heterogeneous subsystems: a sequences of production lines, represented as  $P$ , some renewable energy systems (RESs), and some energy storage systems (ESSs). Each subsystem is characterized by a family of states and parameters. Usually, the state is characterized by a time-series sequence, which can be represented as  $x[k] \in \mathcal{R}, k \in \mathcal{N}$  at the  $k^{th}$  sampling instant, where  $\mathcal{R}$  is the set containing all real numbers and  $\mathcal{N}$  is the set containing all positive integers. For example, the state of charge (SOC) of the battery at  $[k+1]^{th}$  time instant is related to SOC at  $k^{th}$  time instant, power of charge and power of discharge at the  $k^{th}$  time instant. Another example is the working condition of the production line  $P$  at each sampling time instant in terms of  $(on, off)$  of each machine is also a time series, it consists of on/off status of each machine at  $k \in [0, N-1]$ .

It is expected that for each state  $x[k] \in \mathcal{R}, k \in \mathcal{N}$ , we have either a dynamic model or static model to characterize its behaviour over time. We care the performance of this manufacturing system within a finite time, i.e.,  $k \in [0, N - 1]$ . More precisely, it has

$$
x[k+1] = f(x[k+1], x[k], \boldsymbol{\theta}_1), \quad x[0] \in \mathcal{R}, 
$$

(1)

for some nonlinear mapping  $f : \mathcal{R} \times \mathcal{R} \times \mathcal{R}^{n_{\theta}}$  is a known mapping with some parameters  $\theta_1 \in \mathcal{R}^{n_{\theta}}$ . When  $f(x[k+1], x[k], \theta) = x[k+1] + f_1(x[k], \theta_1)$  for some nonlinear mapping  $f(\cdot, \cdot)$ , it becomes a static mapping. When  $f(x[k+1], x[k], \theta) = f_1(x[k], \theta_1)$  holds, it becomes a dynamic system. It is noted that the nonlinear mapping  $f(\cdot,\cdot,\cdot)$  can also represent the Boolean logic such as the machine is on  $(1)$  or off  $(0)$ .

Next, we categorize the state into two categories.

- 1 Non-dispatchable state  $\mathbf{x}_{ND}^{n}[k] \in \mathcal{R}^{n_{ND}}$  for any  $k \in [0, N-1]$  represents all the time-series in the manufacturing system, whose information can be observed but cannot be manipulated. For example, in a RES subsystem, which has a solar panel, the temperature and radiation at each sampling instant  $k$  belong to non-dispatchable states.
- 2 Dispatchable state  $\mathbf{x}_D[k] \in \mathcal{R}^{n_D}$  for any  $k \in [0, N-1]$ represents all the time-series in the manufacturing system, whose information can be both observed and manipulated. For example, the charging and discharging sequence of a battery of an ESS subsystem are dispatchable states.

Similarly, we also classify the parameters involved in the manufacturing system into two categories.

- 1 Non-tunable parameters. The notation of  $\boldsymbol{\theta}_{NT} \in$  $\mathcal{R}^{n_{\theta,NT}}$  represents a family of parameters in the manufacturing system that cannot be tuned. For example, the number of machine in the production line  $P$  is a non-tunable parameter.
- 2 Tunable parameters. The notation of  $\boldsymbol{\theta}_T \in \mathcal{R}^{n_{\theta,T}}$  represents a family of parameters in the manufacturing system that can be participant into the scheduling as a part of scheduling parameters.

Letting  $n_s = n_{ND} + n_D$  and  $n_p = n_{\theta, NT} + n_{\theta, T}$ , it follows that

$$
\overrightarrow{\mathbf{x}}[k] = \begin{bmatrix} \mathbf{x}_{ND}^{T}[k] & \mathbf{x}_{FD}^{T}[k] \end{bmatrix}^{T} \in \mathcal{R}^{n_{s}},  
$$

(2)

and

$$
\overrightarrow{\boldsymbol{\theta}} = \begin{bmatrix} \boldsymbol{\theta}_{NT}^T & \boldsymbol{\theta}_T^T \end{bmatrix}^T \in \mathcal{R}^{n_p},  
$$

(3)

the model to characterize  $\overrightarrow{\mathbf{x}}[k]$  can be re-written as

$$
\Sigma_M : \overrightarrow{\mathbf{x}}[k+1] = \overrightarrow{\mathbf{f}} \left( \overrightarrow{\mathbf{x}}[k+1], \overrightarrow{\mathbf{x}}[k], \overrightarrow{\boldsymbol{\theta}} \right), \ \overrightarrow{\mathbf{x}}[0] \in \mathcal{R}^n(4)
$$

where the nonlinear mapping  $\overrightarrow{\mathbf{f}} : \mathcal{R}^{n_s} \times \mathcal{R}^{n_s} \times \mathcal{R}^{n_p} \to \mathcal{R}^{n_s}$  is known.

We also denote that the prediction using the model  $(4)$  at the *s<sup>th</sup>* sampling instant from the measurements at the *k<sup>th</sup>* sampling instant as  $\hat{\mathbf{x}}[s|k]$  for any  $s > k$  and  $k \in [0, N-1]$ . This leads to two different types of scheduling problems in literature: off-line scheduling/scheduling and on-line scheduling/scheduling.

With the notations introduced, next will provide a rigor mathematical formulation of off-line scheduling and online scheduling.

## 2.1 Off-line scheduling

There are many algorithms in literature, which can be formulated as an off-line scheduling. Denoting

$$
\overrightarrow{\hat{\boldsymbol{\xi}}}[N-1|0] = \begin{bmatrix} \overrightarrow{\hat{\mathbf{x}}}^T_D[1|0] & \cdots & \overrightarrow{\hat{\mathbf{x}}}^T_D[N-1|0] \end{bmatrix}^T,
$$

which is a vector in  $\mathcal{R}^{n_{off}}$  where  $n_{off} = n_D \times (N-1)$ , the off-line scheduling problems can be formulated as

$$
\min_{\overrightarrow{\xi}_{[N-1|0] \in \mathcal{R}^{n_{off}}}, \boldsymbol{\theta}_{T} \in \mathcal{R}^{n_{\theta, T}}} \sum_{k=1}^{N} \mathbf{l}_{1,k} (\overrightarrow{\hat{\mathbf{x}}}[k|0], \overrightarrow{\boldsymbol{\theta}})
$$

(5)

$$
\text{s.t.} \begin{cases}
\overrightarrow{\hat{\mathbf{x}}}[k+1] = \overrightarrow{\mathbf{f}} (\overrightarrow{\mathbf{x}}[k+1], \overrightarrow{\mathbf{x}}[k], \overrightarrow{\boldsymbol{\theta}}), \overrightarrow{\mathbf{x}}[0] \in \mathcal{R}^{n_s} \\
\mathbf{g} (\overrightarrow{\hat{\mathbf{x}}}[k|0], \overrightarrow{\boldsymbol{\theta}}) = \mathbf{0}_{p_1} \quad (6) \\
\mathbf{h} (\overrightarrow{\hat{\mathbf{x}}}[k|0], \overrightarrow{\boldsymbol{\theta}}) \geq \mathbf{0}_{p_2}, \forall k = 0, 1, \dots, N-1.
\end{cases}
$$

(6)

where  $\mathbf{l}_{1,k}(\cdot,\cdot)$  is the time-varying cost function with an appropriate dimension. The optimal solution of the off-line scheduling at the  $k$ <sup>th</sup> instant is denoted as  $J_{off-line}^{*}[k]$ , which is the computed optimal value of  $\mathbf{l}_{1,k}$  when the dispatchable state takes the optimal value.

It is highlighted that many existing algorithms in manufacturing systems with renewable resource management can be re-formulated as  $(6)$ . For example, in Xiong et al.  $(2013)$ , machines of production lines, batteries, combined heat and power  $(CHP)$  plants were used to improve energy efficiency while keeping the production lines running properly by minimizing the makespan of a manufacturing system. The solutions of off-line scheduling can be found by using existing scheduling techniques such as discrete whale optimisation by Tang et al.  $(2016a)$  and particle swarm optimisation by Jiang et al.  $(2019)$ .

**Remark 1.** Due to the complexity of the manufacturing system in the presence of RESs and ESSs, the off-line scheduling with the cost (5) and constraints (6) usually is quite complicated with hundreds of variables to tune and dozens of constraints. This is one of the major reasons that off-line scheduling is preferred as it can ignore the computational cost. The performance of the off-line scheduling is highly dependent on the accuracy of the model used, i.e.,  $\overrightarrow{\mathbf{f}}(\cdot, \cdot, \cdot)$ . If the model is not precise, the solutions obtained from the off-line scheduling is not optimal. Moreover, the modeling errors can be propagated over time, leading to undesirable performance.

In order to address the robustness of the off-line scheduling with respect to unmodelled uncertainties, Xiong et al. (2013) utilised the probability distribution of the machine breakdown, resulting in the stochastic cost function. The scheduling was thus performed by exploiting the statistical properties of this stochastic cost function such as its mean and variance. Although some of robust algorithms with respect to modeling uncertainties and unexpected running situation have been proposed, in general, the off-line scheduling lacks of robustness.

## 2.2 On-line scheduling

On-line scheduling means that at each time instant, new measurements  $\vec{\mathbf{x}}[k] \in \mathcal{R}^{n_s}$  is added and used in scheduling. For the simplicity of the presentation, we define  $N_s$  as the prediction horizon and the control horizon. In a more general setting, the prediction horizon and the control horizon can be different. For example, a 48-hour prediction horizon for electricity generation and 1-hour control horizon for energy management system was used in Palma-Behnke et al. (2013). Denoting

$$
\begin{split} & \overrightarrow{\hat{\boldsymbol{\xi}}}_{s} = \overrightarrow{\hat{\boldsymbol{\xi}}}_{s}[k+N_{s}-1|k] \\ &= \left[ \begin{array}{c} \overrightarrow{\hat{\mathbf{x}}}_{D}^{T}[k+1|k] \ \cdots \ \overrightarrow{\hat{\mathbf{x}}}_{D}^{T}[k+N_{s}|k] \end{array} \right]^{T} \end{split}
$$

which is a vector in  $\mathbb{R}^{n_{k,N_s}}$  where  $n_{k,N_s} = n_D \times (N_s - 1)$ . The on-line scheduling can be formulated as

$$
\begin{align*}
& \min_{\bar{\xi}_{i} \in \mathbb{R}^{n \times s}, \theta_{0} \in \mathbb{R}^{m \times r}, s > 0} \sum_{s=0}^{N_s} L_{2,s}\left(\bar{\xi}[k+s|k], \bar{\theta}\right) \\
\text{s.t. } & 
\begin{cases}
\bar{\mathbf{x}}[k+1] = \bar{\mathbf{f}}\left(\bar{\mathbf{x}}[k], \bar{\mathbf{u}}[k], \bar{\theta}\right), \quad \bar{\mathbf{x}}[k] \in \mathbb{R}^{n} \\
\bar{\mathbf{g}}\left(\bar{\mathbf{x}}[k+s|k], \bar{\theta}\right) = \mathbf{0}_{p_1}, \\
\bar{\mathbf{h}}\left(\bar{\mathbf{x}}[k+s|k], \bar{\theta}\right) \geq \mathbf{0}_{p_2}, \forall s = 0, \ldots, N_s.
\end{cases}
\end{align*}
$$

(7)

(8)

where  $\mathbf{l}_{2,s}(\cdot,\cdot)$  in (7) can be also time-varying. It might be different from  $\mathbf{l}_1(\cdot,\cdot)$  in (5).

The mathematical description of on-line scheduling consisting of  $(7)$  and the constraints  $(8)$  is very general. It contains both on-line adjustment without using prediction models and on-line rescheduling. When  $N<sub>s</sub> = 0$ , the on-line scheduling problem becomes an on-line adjustment. More precisely, by using the current measurements  $\vec{\mathbf{x}}[k] \in \mathcal{R}^{n_s}$ , it is possible to re-tune the dispatchable state  $\hat{\boldsymbol{\xi}}_0$  to reach the optimal solution of the cost function  $\mathbf{l}_{2,0}(\cdot,\cdot)$ .

When  $N_{s} \geq 1$ , this problem becomes on-line rescheduling based on the predicted future behaviours using the model and the current measurements  $\vec{x}[k]$ . In particular, when  $N_{s} \geq 2$ , the optimal solution has the predicted future  $N_{s}$ solution, i.e.,  $\hat{\vec{\xi}}_{s}^{*} = \hat{\vec{\xi}}_{s}^{*}[k + N_{s} - 1|k], N_{s} \geq 2$ . Under such a situation, the concept of receding horizon design and model predictive control (MPC) Shan et al. (2018); Wenzelburger and Allgöwer (2021), in which only the first step of the predicted optimal solution, is used.

There are many existing algorithms proposed for optimizing the production line performance in the presence of RESs. For example, in Nouiri et al. (2018), rescheduling was allowed in the flexible job scheduling by using the latest measurements, providing robustness and flexibility. In Shan et al. (2018), MPC was used to optimize the performance of renewable energy components such as batteries in microgrids.

Remark 2. Different from off-line scheduling, on-line scheduling includes on-line rescheduling, which utilizes the latest measurement  $\overrightarrow{\mathbf{x}}[k]$  and the model to predict the future behaviour within a finite prediction horizon  $N_s$ . On one hand, such a setting leads to more robust optimal performance with respect to the modelling uncertainties by using the latest measurements. On the other hand, this receding horizon requires a rescheduling at each time step and greatly increases computational cost. 

Both off-line scheduling and on-line scheduling techniques have their advantages and disadvantages in terms of computational cost and robustness with 

respect to modelling uncertainties. This work aims to balance the robustness, optimality, computational cost, and flexibility by providing a novel design framework, which introduces a new design freedom using the partially-dispatchable state, and integrating the off-line scheduling with an event-trigger on-line scheduling. This novel framework is called an event-triggered hybrid scheduling (ETHS).

# 3. EVENT-TRIGGERED HYBRID SCHEDULING

For simplicity, in this section, we remove the design of the optimal tunable parameter  $\theta_T$  in the cost functions (5) and (7). In order to increase the flexibility of the proposed ETHS, we further decompose of the dispatchable state into two sub-classes. One is called fully-dispatchable state  $\mathbf{x}_{FD} \in \mathcal{R}^{n_{FD}}$  and the other is called partially-dispatchable state  $\mathbf{x}_{PD} \in \mathcal{R}^{n_{PD}}$ . We use the fully-dispatchable state in both off-line and on-line scheduling. The partially-dispatchable state will be used in off-line scheduling at the beginning. At the k<sup>th</sup> time instant, if the predicted performance is good enough,  $\mathbf{x}_{PD}[k]$  will be treated as the non-dispatchable state, and will not be involved in on-line scheduling. If the predicted performance is not satisfying,  $\mathbf{x}_{PD}[k]$  will be triggered as a fully-dispatchable state, participating into on-line rescheduling.

The concept of partially-dispatchable state is introduced. More precisely, the partially-dispatchable state  $\mathbf{x}_{PD}[k]$  can be represented as:

$$
\mathbf{x}_{PD}[k] = \begin{bmatrix} x_{PD,1}[k] & \dots & x_{PD,n_{PD}}[k] \end{bmatrix}^T \in \mathcal{R}^{n_{PD}}, 
$$

(9)

for any  $k \in [0, N-1]$ . The idea of using this novel partially dispatchable state is to balance the robustness withrespect to modelling uncertainties and the computational cost. Moreover, choosing this partially dispatchable state becomes an extra design freedom in ETHS, providing more flexibility. This partially dispatchable state can be a non-dispatchable state in some sub-intervals of  $[0, N-1]$  while in other sub-intervals of  $[0, N-1]$ , it becomes a fully-dispatchable state. For the convenience of the notation, it is denoted that  $\Omega_{s,i}$  is union of time intervals within the interval  $[s, N-1]$  in which the *i*<sup>th</sup> partially-dispatchable state  $x_{PD,1}$  can be fully manipulated.

Consequently, the dispatchable state  $\mathbf{x}_D$  can be re-written as

$$
\mathbf{x}_{D}[k] = \begin{bmatrix} \mathbf{x}_{FD}^{T}[k] \\ \mathbf{x}_{PD}^{T}[k] \end{bmatrix}^{T} \in \mathcal{R}^{n_{D}}.
$$

 (10)

The proposed ETHS consists of four steps  $(S1-S4)$  as shown in Figure  $1$ .

![](_page_3_Figure_13.jpeg)

- Fig. 1. The diagram of the event-triggered hybrid scheduling
- S1 : Off-line scheduling defined by the cost (5) and constraints  $(6)$  to find an off-line optimal state

$$
\overrightarrow{\hat{\boldsymbol{\xi}}}^*[N-1|0] = \left[ \begin{pmatrix} \overrightarrow{\hat{\boldsymbol{\xi}}}^*_{FD}[N-1|0] \\ \overrightarrow{\hat{\boldsymbol{\xi}}}^*_{PD}[N-1|0] \end{pmatrix}^T \right]^T, 
$$

 (11)

- S2 : On-line adjustment for fully-dispatchable state  $\mathbf{x}_{FD}^{T}[k]$ . More precisely, at the each step, solve the online scheduling problem  $(7)$  and the constraints  $(8)$ with the scheduling parameter of fully-dispatchable state  $\mathbf{x}_{FD}[k]$  with  $N_s = 0$  while the partiallydispatchable state is a constant vector coming from  $\hat{\boldsymbol{\xi}}_{PD}^*[N-1|0]$  in (11). The solution of the on-line adjustment is  $\mathbf{x}_{FD}^*[k]$ .

- S3 : $\mathrel{\mathop:}$  Evaluating the predicted future performance using the current measurements of  $\mathbf{x}_{ND}[k]$  and optimal fully-dispatchable state  $\mathbf{x}_{FD}^{*}[k]$  while the partiallydispatchable state  $\dot{\boldsymbol{\xi}}_{PD}^*[N-1|0]$  is treated as a dispatchable state  $\xi_{PD}[N - 1\vert 0]$  is treated as a constant. For the convenience of notation, we denote

$$
\overrightarrow{\mathbf{z}}[k] = \begin{bmatrix} \mathbf{x}_{FD}^{T}[k] \\ \mathbf{x}_{ND}^{T}[k] \end{bmatrix}^{T}, 
$$

(12)

and the parameter  $\boldsymbol{\alpha} = \hat{\boldsymbol{\xi}}_{PD}^{*}[N-1,0]$  coming from S2. Moreover, we denote

$$
\overrightarrow{\mathbf{z}}[k] = \left[\begin{bmatrix} (\mathbf{x}_{FD}^*[k])^{T} \\ \mathbf{x}_{ND}^{T}[k] \end{bmatrix}\right]^{T}, \qquad (13)
$$

 (13)

consequently, the future performance in terms of the following cost function is evaluated:

$$
\mathbf{J}[k] = \sum_{s=1}^{N-k+1} \mathbf{l}_{3,s} \left( \overrightarrow{\mathbf{z}}[k+s|k], \overrightarrow{\boldsymbol{\theta}}, \boldsymbol{\alpha} \right)
$$

(14) 

$$
s.t. \overrightarrow{\mathbf{z}}[k+1] = \overrightarrow{\mathbf{f}}_{z} \left( \overrightarrow{\mathbf{z}}[k+1], \overrightarrow{\mathbf{z}}[k], \boldsymbol{\theta} \right),
$$

with the initial condition at  $\overrightarrow{\mathbf{z}}[k]$ . Here  $\overrightarrow{\mathbf{z}}[k]$  is defined in (13) and  $\overrightarrow{\mathbf{f}}_z$  is some parts of  $\overrightarrow{\mathbf{f}}(\cdot,\cdot,\cdot)$ defined in  $(6)$  or  $(8)$ . Here the nonlinear mapping  $\mathbf{l}_{3,k}(\cdot,\cdot,\cdot)$  can be different from  $\mathbf{l}_1$  in (5) or  $\mathbf{l}_2$  (7). It is assumed that  $\mathbf{J}[k] \in \mathcal{R}^{n_J}$ . 

S4 : Trigger on-line re-scheduling if needed. Precisely, if the performance  $\mathbf{J}[k]$  is not satisfying, i.e., if

$$
\ell\left(\mathbf{J}[k]\right) \ge \varepsilon, 
$$

(15)

where  $\ell(\cdot)$ :  $\mathbb{R}^{n_J} \to \mathbb{R}_{\geq 0}$  and  $\varepsilon$  is a pre-defined positive constant, then on-line rescheduling will be triggered, hence it will solve the on-line scheduling problem  $(7)$  and the constraints  $(8)$  with the scheduling parameter of the dispatchable state  $\mathbf{x}_D[k]$  with  $N_s \geq 1$ .

It is noted that both off-line scheduling (in  $S1$ ) and on-line scheduling (in  $S2$  and  $S4$  when the rescheduling is triggered) are performed. The performance of on-line adjustment is evaluated using the model to decide whether a rescheduling is needed. Different from the existing offline scheduling and on-line scheduling, the number of manipulated variables changes at different stage due to the introduction of the partial dispatchable state.

# 4. A SIMULATION EXAMPLE

This section shows how to use the proposed event-triggered hybrid scheduling framework to design a flow shop manufacturing system integrated with PV so as to reduce energy costs and guarantee production throughput. This section starts from a brief description of the system, followed by a few scenarios to address the following questions in designing an  $\text{ETHS}$ :

- (1) How to select partially-dispatchable state?
- (2)  How to implement on-line adjustment?
- (3) How to select the evaluating function  $\mathbf{J}[k]$  in (14)?
- (4) How to select event-trigger function  $\ell(\cdot)$  and the threshold  $\varepsilon$  in (15)?

These scenarios will provide design guidelines for engineering practitioners and demonstrate the validity, applicability and flexibility of the proposed framework.

## 4.1 Description of the System

This subsection provides a description of the system, including the system components, data sources, operational task, randomness during simulation, and all states and parameters.

The manufacturing system consists of a  $100\text{-}\text{kW}$  PV system, a  $10$ -machine flow shop production line, a  $50$ -kWh Energy Storage System (ESS), a 100-kW gas turbine  $(GaT)$ , and the grid for power supply and surplus power feed-in. Solar irradiance data are from the Australian 

Bureau of Meteorology, grid electricity price and feedin tariff are from SUMO, and flow shop machine power consumption and operation time are acquired by measuring and scaling up the empirical data from factories. The example is to operate the introduced system by deciding each component's states to finish  $25 \text{ jobs}$  and reduce energy cost for 24 hours with a time resolution of  $5$  minutes, namely 288 time steps. The energy flow and material flow can be found in Figure  $2$ .

![](_page_4_Figure_18.jpeg)

Fig. 2. Energy Flow and Material Flow of the Manufac- $\text{turing System}$ 

In the simulation, the machine breakdown processes some randomness. The possibility of breakdown and the time when the breakdown happens are assumed to follow an exponential distribution, which was proposed by He and Sun  $(2013)$ ; Tang et al.  $(2016b)$ . For 10 machine states defined as  $\mathbf{x}_2$  (see Table 1 for the definition of states), it has the form of

$$
\begin{cases} P(\hat{\mathbf{x}}_{2,i}[k] = 0 | \mathbf{x}_{2,i}[k] = 1) = 1 - e^{-\theta_{12}T_{on}} \\ P(\hat{\mathbf{x}}_{2,i}[k+1] = 1 | \hat{\mathbf{x}}_{2,i}[k] = 0) = 1 - e^{-\theta_{13}T_{bd}} \end{cases},  
$$

(16)

where  $T_{on}$  is the accumulated operating time for a machine since the last observed breakdown  $\hat{\mathbf{x}}_{2,i}[k]$ ,  $T_{bd}$  means the accumulated observed breakdown at the next time step based on the current breakdown. Here  $\theta_{12}$  and  $\theta_{13}$  are parameters used to characterize the probability distribution (see details in Table 2).

In this simulation, the initial selection of states is listed in Table 1. For example,  $x_1$  is the state variable for PV, the value of  $x_1[k]$  means the power of PV generation at the  $k^{th}$  sampling instant. When a vector state such as  $\mathbf{x}_4 \in \mathbb{R}^{10}$  is used,  $x_{4,i}[k]$  means its  $i^{th}$  element at the  $k^{th}$  sampling instant. The similar method is used for defining parameters, which are summarized in Table 2. As discussed in Section 3, all the parameters are non-tunable.

## 4.2 Off-line Scheduling, On-line Scheduling and ETHS

This subsection will compare the performance among offline scheduling, on-line schedule and the proposed ETHS. Moreover, the tuning freedom in the proposed ETHS will be discussed.

 Off-line scheduling

Off-line scheduling is conducted with the objective function of minimising total operational cost  $\mathbf{l}_{1,k}$  in (6), defined as follows:

Table 1. States Variables for the Simulation

| States                              | Description                                          |
|-------------------------------------|------------------------------------------------------|
| ND States                           |                                                      |
| $x_1 \in \mathcal{R}^1$             | Power of PV generation                               |
| PD States                           |                                                      |
| $\mathbf{x}_2 \in \mathcal{R}^{10}$ | Machine status on or off for each machine            |
| $\mathbf{x}_3 \in \mathcal{R}^{10}$ | Operation status starts or not start on each machine |
| $\mathbf{x}_4 \in \mathcal{R}^{10}$ | Number of operations finished on each machine        |
| $x_5 \in \mathcal{R}^1$             | GaT generation power                                 |
| FD States                           |                                                      |
| $\mathbf{x}_6 \in \mathcal{R}^1$    | ESS charging power                                   |
| $\mathbf{x}_7 \in \mathcal{R}^1$    | ESS discharging power                                |
| $\mathbf{x}_8 \in \mathcal{R}^1$    | ESS state of charge (SOC)                            |
| $\mathbf{x}_9 \in \mathcal{R}^1$    | Grid electricity procurement power                   |
| $\mathbf{x}_{10} \in \mathcal{R}^1$ | Grid electricity feed-in power                       |

Table 2. Parameters for the Simulation 

| Parameters | Description | Value |
|------------|-------------|-------|
| $\theta_{1} \in \mathcal{R}^{10}$ | Machine power for 10 machines (kW) | [50.63,22.4,5.12,5.28,12.68,35.14,6.58,5.21,8.4,2.15] |
| $\theta_{2} \in \mathcal{R}^{10}$ | Operation time for 10 operations (5 min) | [5,2,8,5,3,8,4,6,6,7] |
| $\theta_{3} \in \mathcal{R}^{1}$ | Gas price ($) | 1.83 |
| $\theta_{4} \in \mathcal{R}^{1}$ | ESS charging/discharging efficiency | 0.9 |
| $\theta_{5} \in \mathcal{R}^{1}$ | ESS fixed operational cost ($/5 min) | 0.003 |
| $\theta_{6} \in \mathcal{R}^{1}$ | ESS charging/discharging degradation cost ($/kWh) | 0.0006 |
| $\theta_{7} \in \mathcal{R}^{1}$ | ESS maximum capacity (kWh) | 50 |
| $\theta_{8} \in \mathcal{R}^{1}$ | ESS depth of discharge | 80% |
| $\theta_{9} \in \mathcal{R}^{1}$ | ESS maximum charging/discharging power (kW) | 50 |
| $\theta_{10} \in \mathcal{R}^{288}$ | Grid electricity procurement price ($/kWh) | 0.330 from 9am to 9pm<br>0.187 from 9pm to 9am |
| $\theta_{11} \in \mathcal{R}^{1}$ | Grid electricity feed-in tariff ($/kWh) | 0.052 |
| $\theta_{12} \in \mathcal{R}^{1}$ | Machine breakdown possibility parameter | 0.002 |
| $\theta_{13} \in \mathcal{R}^{1}$ | Machine breakdown time parameter | 1 |
| $\theta_{14} \in \mathcal{R}^{1}$ | Number of production task | 25 |

$$
\mathbf{l}_{1,k} = \mathbf{x}_{9}[k] \cdot \boldsymbol{\theta}_{10,k} - \mathbf{x}_{10} \cdot \theta_{11} + \theta_{5} + (\mathbf{x}_{6}[k] + \mathbf{x}_{7}[k]) \cdot \theta_{4} + \mathbf{x}_{5}[k] \cdot \theta_{3}  
$$

(17)

The constraints used in this simulation include the state constraints at each sampling instant namely for any  $k =$  $1, 2, \ldots, 288$ :

$$
\begin{cases}
\mathbf{x}_{6}[k] \le \theta_{9} \\
\mathbf{x}_{7}[k] \le \theta_{9} \\
\mathbf{x}_{8}[k] \ge \theta_{7} \cdot (1 - \theta_{8})/2 \\
\mathbf{x}_{8}[k] \le \theta_{7} \cdot (1 + \theta_{8})/2 \\
\mathbf{x}_{8}[k + 1] = \mathbf{x}_{8}[k] + \theta_{4} \cdot \mathbf{x}_{6}[k] - 1/\theta_{4} \cdot \mathbf{x}_{7}[k] \\
\phi_{1}[k] = \sum_{i=1}^{10} \mathbf{x}_{2,i}[k] \cdot \boldsymbol{\theta}_{1,i} + \mathbf{x}_{10}[k] + \mathbf{x}_{7}[k]
\end{cases}
$$

(18)

where  $\phi_1[k] = \mathbf{x}_1[k] + \mathbf{x}_9[k] + \mathbf{x}_7[k] + \mathbf{x}_5[k]$ . There are also terminal constraints at the starting point or the end point of  $288$  sampling points:

$$
\mathbf{x}_{8}[0] = \theta_{7} \cdot 0.5
$$

$$
\mathbf{x}_{8}[288] = \theta_{7} \cdot 0.5
$$

$$
\mathbf{x}_{4,10}[288] \ge \theta_{14}
$$

(19)

Finally are the constraints coming from the flow shop. For the  $i^{th}$  job,  $i = 1, ..., 10$ , it has the following constraints:

$$
\begin{cases}
\mathbf{x}_{4,i}[k] = 0, k = 1, 2, \dots, \theta_{2,i}. \\
\mathbf{x}_{4,i}[k] = \sum_{j=0}^{k} \mathbf{x}_{3,i}[j], k = \theta_{2,i}, \dots, 288
\end{cases}
$$

$$
\mathbf{x}_{2,i}[k] = \sum_{j=0}^{k} \mathbf{x}_{3,i}[j], k = 1, 2, \dots, \theta_{2,i}
$$

$$
\mathbf{x}_{2,i}[k-1] = \sum_{j=k-\theta_{2,i}}^{k} \mathbf{x}_{3,i}[j], k = \theta_{2,i}, \dots, 288
$$

$$
\mathbf{x}_{3,i}[k] \cdot \theta_{2,i} \leq \sum_{j=k}^{k+\theta_{2,i}} \mathbf{x}_{2,i}[j], k = 1, 2, \dots, 288 - \theta_{2,i}
$$

(20)

Moreover, **x**<sub>4</sub> has the dynamics, leading to the following

Moreover,  $\mathbf{x}_4$  has the dynamics, leading to the following constraint for  $i = 1, \dots, 9$  $\mathbf{x}_{4,i}[k] \ge \mathbf{x}_{4,i+1}[k] + \mathbf{x}_{2,i+1}[k], k = 1, 2, ..., 288.$  (21) These constraints cover the dynamic characterization for the state of ESS, flow shop assumptions, and energy balance equation, whose detailed explanations can be found in Zhai et al. (2017); Tang et al. (2016a).

**On-line scheduling**

On-line scheduling follows the objective and constraints in (7-8). Specifically, we choose  $\mathbf{l}_{2,s} = \mathbf{l}_{1,k}$ , which means on-line scheduling shares the same objective with off-line scheduling. The length of time sequence is  $N_s = 288 - k$ , which means the cost compute from the current time until the end of day. Most of the constraints in on-line scheduling remain the same as off-line scheduling, except that we introduce a new design freedom  $d$  to handle machine breakdown. This constraint is a terminal constraint in (19), which indicates that the finished jobs at the end of the day should not be less than the production task. With the consideration that the machine breakdown might lead to unfinished jobs, in on-line scheduling this constraint is modified as  $\mathbf{x}_{4,10}(288 - k - d) \geq \theta_{14}$ . Here  $d$  is the buffer to finish the job. It can be time-varying.

In this simulation, we design  $d$  according to the accumulated machine breakdown time. The longer breakdown lasts, the more likely jobs are unfinished. Consequently, the remaining jobs should be accelerated. This leads to an earlier deadline  $288 - k - d$ .

Event-triggered hybrid scheduling

 $\text{ETHS}$  follows the 4 steps presented in Section 3.

At S1, an off-line scheduling is conducted as  $(17-21)$ .

We define a new sequence to remember when the re-scheduling happens. When the re-scheduling happens at the  $k^{th}$  sampling, it is denoted that  $\tau_i = k, i = 1,\ldots$ . We define  $C[\tau_i] = J_{off-line}[\tau_i]^*$  as the scheduled cost.

At S2, an on-line adjustment is implemented as  $(7)$  with  $\mathbf{l}_{2,k}$  is defined as

$$
\mathbf{l}_{2,k} = \mathbf{x}_{9}[k] \cdot \boldsymbol{\theta}_{10,k} - \mathbf{x}_{10} \cdot \theta_{11} + \theta_{5} + (\mathbf{x}_{6}[k] + \mathbf{x}_{7}[k]) \cdot \theta_{4} + \hat{\mathbf{x}}_{5}[k] \cdot \theta_{3} - C[k].  
$$

(22)

The objective in  $(22)$  is to minimize the gap between the measured cost and the scheduled cost  $C[k]$ . The constraints are selected as

$$
s.t. \begin{cases} \mathbf{x}_{6}[k] \leq \theta_{9} \\ \mathbf{x}_{7}[k] \leq \theta_{9} \\ \mathbf{x}_{8}[k] \geq \theta_{7} \\ \mathbf{x}_{8}[k] \leq \theta_{7} \\ \phi_{2}[k] = \sum_{i=1}^{10} \hat{\mathbf{x}}_{2,i}[k] \cdot \boldsymbol{\theta}_{1,i} + \mathbf{x}_{10}[k] + \mathbf{x}_{7}[k]. \end{cases}
$$

(23)

where  $\phi_2[k] = \hat{\mathbf{x}}_1[k] + \mathbf{x}_9[k] + \mathbf{x}_7[k] + \hat{\mathbf{x}}_5[k]$ . It can be seen that all non-dispatchable states and partially-dispatchable states become observed values, while fully-dispatchable states are control variables.At S3, an evaluation function  $J[k]$  is selected as

$$
\mathbf{J}[k] = \sum_{s=0}^{N_s} |\hat{x}_1[k+s|k] - x_1[k+s|k]| + \sum_{i=1}^{10} \sum_{j=0}^{k} (1 - \hat{\mathbf{x}}_{2,i}[j]), 
$$

(24)

which accumulates the solar prediction error and the historical machine breakdown time. This cost indicates that the rescheduling will only be triggered when the solar prediction is inaccurate enough or the machine breakdown time is too long.

At S4, we choose  $l(\mathbf{J}[k]) = \mathbf{J}[k]$ , and we select the threshold as  $\varepsilon = 70$  in order to decide whether on-line rescheduling will be triggered or not.

Simulations results are summarized in Table 3 and Figure 3. With the possibility that some jobs are not able to finish, total energy cost becomes unfair to compare different scheduling techniques. Here the energy cost per job is selected as one of performance indices to compare three different scheduling schemes. The simulation results show that off-line scheduling cannot handle unexpected events, resulting in unfinished jobs due to random machine breakdown while the computational cost in terms of computing time is low as it runs once every 24 hours. On-line scheduling has the best energy cost performance and is able to finish all jobs while it results in very large computational cost due to rescheduling frequently. It is highlighted that the proposed ETHS provides a good balance between the performance in terms of the energy cost per job and the computational cost. It is able to finish all jobs in the presence of random machine breakdowns with a reasonable computational cost. Moreover, the flexibility of fully-dispatchable components is highly utilised to deal with uncertainties coming from PV generation or random machine breakdowns.

Table 3. Scheduling Methods Comparison

|                         | Finished Jobs | Energy Cost Per Job | Computing Time/(s) |
|-------------------------|---------------|---------------------|--------------------|
| Off-line                | 23.7          | 7.89                | 13                 |
| On-line                 | 25            | 6.51                | 4604               |
| ETHS $\varepsilon = 70$ | 25            | 7.10                | 508                |

## 4.3 The Choices of Parameters of ETHS

This subsection demonstrates the flexibility of the proposed ETHS by showing how different choices of parameters in four steps will affect its performance as four questions listed.

![](_page_6_Figure_11.jpeg)

Fig. 3. Flow Shop Gantt Charts Comparison

**The choice of partial dispatchable state**

Firstly, the categorisation of system components should consider both the physical property and the operational requirements. Fully-dispatchable components have higher flexibility than partially-dispatchable components, here we compare the performances of different categorisations in Table 4.

**Implementation of on-line adjustment**

Secondly, to emphasise the importance of  $S2$ , we compare the performances under scenarios with or without  $S2$ . Online adjustment targets at handling unserious uncertainty by utilising the high flexibility of fully-dispatchable components. Therefore, PV generation and demand energy errors between prediction and observation can be handled and the energy cost is reduced by  $14.2\%$ , as shown in Table 4.

**The selection of the evaluation function**

Thirdly, S3 to select  $J[k]$  is decides whether it's necessary to trigger on-line rescheduling. Without the evaluation, the rescheduling will be executed at each time instant, resulting in better energy cost performance but much higher computing time, as shown in Table 4.

Table 4. Parameter Selection Comparison

| Scenario            | Finished Jobs   | Energy Cost Per Job | Computing Time (s) |      |
|---------------------|-----------------|---------------------|--------------------|------|
| PD Selection        | Production, GaT | 25                  | 7.10               | 508  |
|                     | Production      | 25                  | 6.81               | 524  |
|                     | None            | 25                  | 6.51               | 4604 |
| On-line Adjustment  | With S2         | 25                  | 6.51               | 4592 |
|                     | Without S2      | 25                  | 8.27               | 4604 |
| Evaluation Function | With S3         | 25                  | 7.10               | 508  |
|                     | Without S3      | 25                  | 8.27               | 4604 |

**The choice of the threshold**

Finally, the event-trigger threshold influences the frequency of rescheduling, thus resulting in different performances and computing time, as shown in Table  $5$ .

Table 5. Threshold Comparison

| Threshold        | Finished Jobs | Energy Cost Per Job | Computing Time/(s) | Reschedule Frequency |
|------------------|---------------|---------------------|--------------------|----------------------|
| $\epsilon = 30$  | 25            | 6.97                | 556                | 14                   |
| $\epsilon = 70$  | 25            | 7.10                | 508                | 5                    |
| $\epsilon = 100$ | 25            | 7.77                | 490                | 2                    |

# 5. CONCLUSION

This paper proposed a novel event-triggered hybrid  $\text{ scheduling (ETHS)}$  to balance the robustness, performance and computational cost in the energy-aware scheduling for the manufacturing systems. By mathematically formulating the existing off-line scheduling and on-line scheduling techniques, the proposed ETHS utilized the so-called partially-dispatchable state, which can be realtimely rescheduled when the desired performance is not satisfied. Compared with traditional off-line and on-line scheduling method, ETHS identifies the flexibility of heterogenous components in the manufacturing system, thus yielding outstanding performance with an acceptable computational cost. The flexibility of the  $4\text{-step}$  ETHS was also demonstrated by a simulation example. The proposed ETHS can be extended to more complicated energy-aware manufacturing system beyond the flow shop.

# REFERENCES

- Beier, J. (2017). Simulation Approach Towards Energy Flexible Manufacturing Systems. Sustainable Production, Life Cycle Engineering and Management. Springer International Publishing, Cham. doi: $10.1007/978$ -3-319- $46639-2.$
- Beier, J., Thiede, S., and Herrmann, C. (2017). Energy flexibility of manufacturing systems for variable renewable energy supply integration: Real-time control method and simulation. Journal of Cleaner Production, 141, 648–661. doi:10.1016/j.jclepro.2016.09.040.
- Biel, K., Zhao, F., Sutherland, J.W., and Glock, C.H.  $(2018)$ . Flow shop scheduling with grid-integrated onsite wind power using stochastic milp. *International* Journal of Production Research,  $56(5)$ ,  $2076-2098$ . doi:  $10.1080/00207543.2017.1351638.$
- Dong, J. and Ye, C.  $(2022)$ . Green scheduling of distributed two-stage reentrant hybrid flow shop considering distributed energy resources and energy storage system. Computers and Industrial Engineering, 169,  $108146.$  doi:10.1016/j.cie.2022.108146.
- Fazli Khalaf, A. and Wang, Y. (2018). Energy-costaware flow shop scheduling considering intermittent renewables, energy storage, and real-time electricity International Journal of Energy Research, pricing.  $42(12), 3928-3942.$  doi: $10.1002$ /er. $4130.$
- He, W. and Sun, D.h. (2013). Scheduling flexible job shop problem subject to machine breakdown with route changing and right-shift strategies. The International Journal of Advanced Manufacturing Technology,  $66(1-4)$ ,  $501-514$ . doi: $10.1007/s00170-012-4344-4$ .
- Impram, S., Nese, S.V., and Oral, B. (2020). Challenges of renewable energy penetration on power system flexibility: A survey. *Energy Strategy Reviews*, 31, 100539.
- Jiang, T., Zhang, C., and Sun, Q.M. (2019). Green job shop scheduling problem with discrete whale optimization algorithm. *IEEE Access*, 7,  $43153-43166$ . doi:  $10.1109/\text{ACCESS}.2019.2908200.$
- Karimi, S. and Kwon, S. (2021). Comparative analysis of the impact of energy-aware scheduling, renewable energy generation, and battery energy storage on production scheduling. International Journal of Energy Research,  $45(13)$ ,  $18981-18998$ . doi: $10.1002$ /er.6999.
- Nayak, A., Lee, S., and Sutherland, J.W. (2019). Dynamic load scheduling for energy efficiency in a job shop with on-site wind mill for energy generation. *Procedia CIRP*, 80, 197–202. doi:10.1016/j.procir.2018.12.003.
- $\text{Bekrar},$  $\text{and}$ Nouiri, Μ., А.,  $Trentesaux,$ D. Towards energy efficient scheduling and  $(2018).$ rescheduling for dynamic flexible job shop problem.  $IFAC-PapersOnLine,$  $51(11), \quad 1275-1280.$  $\text{doi:}$  $10.1016/j.ifacol.2018.08.357.$
- Palma-Behnke, R., Benavides, C., Lanas, F., Severino, B., Reyes, L., Llanos, J., and Saez, D. (2013). A microgrid energy management system based on the rolling horizon  $\text{strategy.}$  $IEEE$  Transactions on Smart Grid,  $4(2)$ ,  $996-1006.$  doi: $10.1109/$ TSG. $2012.2231440.$
- Pamparana, G., Kracht, W., Haas, J., Díaz-Ferrán, G., Palma-Behnke, R., and Román, R. (2017). Integrating photovoltaic solar energy and a battery energy storage system to operate a semi-autogenous grinding mill. Journal of Cleaner Production, 165, 273–280.  $\text{doi.}$  $10.1016/j.jclepro.2017.07.110.$
- Pierri, E., Hellkamp, D., Thiede, S., and Herrmann, C.  $(2021)$ . Enhancing energy flexibility through the integration of variable renewable energy in the pro-Procedia CIRP, 98, 7–12.  $\text{cess industry.}$  $\text{doi.}$  $10.1016/j.procir.2020.12.001.$
- Shan, Y., Hu, J., Li, Z., and Guerrero, J.M. (2018). A model predictive control for renewable energy based ac microgrids without any pid regulators. *IEEE Trans*actions on Power Electronics,  $33(11)$ ,  $9122-9126$ . doi:  $10.1109/\text{TPEL}.2018.2822314.$
- Tang, D., Dai, M., Salido, M.A., and Giret, A. (2016a). Energy-efficient dynamic scheduling for a flexible flow shop using an improved particle swarm optimiza-Computers in Industry, 81, 82–95. tion.  $\text{doi:}$  $10.1016/j.$ compind. $2015.10.001.$
- Tang, D., Dai, M., Salido, M.A., and Giret, A. (2016b). Energy-efficient dynamic scheduling for a flexible flow shop using an improved particle swarm optimiza- $Computers \text{ in } Industry, 81, 82–95.$ tion. doi:  $10.1016/j.$ compind. $2015.10.001.$
- Thornton, A., Schultz, C., Kara, S., and Reinhart, G. Concurrent scheduling of a job shop and  $(2017).$ microgrid to minimize energy costs under due date constraints. In 2017 IEEE International Conference on Industrial Engineering and Engineering Management (IEEM), 1326–1330. IEEE, Singapore.  $\text{doi:}$  $10.1109/IEEM.2017.8290108.$
- Wenzelburger, P. and Allgöwer, F.  $(2021)$ . Model predictive control for flexible job shop scheduling in industry  $4.0.$ Applied Sciences,  $11(17)$ ,  $8145$ .  $\text{doi:}$  $10.3390/\text{app}11178145.$
- Xiong, J., Xing, L.n., and Chen, Y.w. (2013). Robust scheduling for multi-objective flexible job-shop problems with random machine breakdowns. International Journal of Production Economics,  $141(1)$ ,  $112-126$ . doi:  $10.1016/j.ijpe.2012.04.015.$
- Zhai, Y., Biel, K., Zhao, F., and Sutherland, J.W. (2017). Dynamic scheduling of a flow shop with on-site wind generation for energy cost reduction under real time electricity pricing.  $CIRP$  Annals, 66(1), 41–44. doi:  $10.1016/j.cirp.2017.04.099.$